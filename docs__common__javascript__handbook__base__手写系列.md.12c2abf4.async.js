(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{"/E8c":function(e,n,t){"use strict";t.r(n);var l=t("ahKI"),a=t.n(l),r=t("s8Wh"),o=t("Fesk"),c=a.a.memo((e=>{e.demos;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("h3",{id:"\u6570\u7ec4\u6241\u5e73\u5316"},a.a.createElement(r["AnchorLink"],{to:"#\u6570\u7ec4\u6241\u5e73\u5316","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u6570\u7ec4\u6241\u5e73\u5316"),a.a.createElement(o["a"],{code:"function flatten(arr){\n    return arr.reduce((pre, current) => {\n        return pre.concat(Array.isArray(current) ? flatten(current) : current);\n    }, [])\n}",lang:"js"}),a.a.createElement("h3",{id:"\u9ad8\u9636\u51fd\u6570"},a.a.createElement(r["AnchorLink"],{to:"#\u9ad8\u9636\u51fd\u6570","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u9ad8\u9636\u51fd\u6570"),a.a.createElement(o["a"],{code:"function say(a,b){\n    console.log('sya', a, b)\n}\n// \u5bf9say\u51fd\u6570\u8fdb\u884c\u589e\u5f3a\uff0c\u6269\u5c55\u4e1a\u52a1\u4ee3\u7801\nFunction.prototype.before = function(fn){\n    return function(...args){\n        fn();\n        this(...args);\n\t}\n}\nlet beforeSay = say.before(function(){\n    console.log('before say');\n})\nbeforeSay('holle', 'world');",lang:"js"}),a.a.createElement("h3",{id:"\u67ef\u91cc\u5316\u4e0e\u53cd\u67ef\u91cc\u5316"},a.a.createElement(r["AnchorLink"],{to:"#\u67ef\u91cc\u5316\u4e0e\u53cd\u67ef\u91cc\u5316","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u67ef\u91cc\u5316\u4e0e\u53cd\u67ef\u91cc\u5316"),a.a.createElement(o["a"],{code:"// \u67ef\u91cc\u5316\nfunction curring(fn){\n    let length = fn.length;\n    let totalArgs = [];\n    function curFn(...args){\n        totalArgs = [...totalAtgs, ...args];\n        if(totalArgs.length < length){\n            return curFn;\n        }else{\n            let result = fn(...totalArgs);\n            totalArgs.length = 0;\n            return result;\n        }\n    }\n}\n// \u53cd\u67ef\u91cc\u5316\nfunction unCurring(curredFn){\n    return function(...args){\n        return curredFn(...args);\n\t}\n}",lang:"js"}),a.a.createElement("h3",{id:"\u9632\u6296debounce\u4e0e\u8282\u6d41throttle\u65b9\u6cd5"},a.a.createElement(r["AnchorLink"],{to:"#\u9632\u6296debounce\u4e0e\u8282\u6d41throttle\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u9632\u6296debounce\u4e0e\u8282\u6d41throttle\u65b9\u6cd5"),a.a.createElement(o["a"],{code:"// \u9632\u6296\uff0c\u201c\u4f1a\u9500\u6bc1\u201d\u5b9a\u65f6\u5668\nfunction debounce(fn, ms){\n    let timer;\n    return function(...args){\n        if(timer){\n            clearTimeout(timer);\n            timer = null;\n        }\n        timer = setTimeout(() => fn(...args), ms);\n    }\n}\n// \u8282\u6d41\uff0c\u201c\u4e0d\u9500\u6bc1\u201d\u5b9a\u65f6\u5668\nfunction throttle(fn, ms){\n    let timer;\n    return function(...args){\n        if(!timer){\n            timer = setTimeout(() => {\n                fn(...args);\n                clearTimeout(timer);\n                timer = null;\n            }, ms)\n        }\n    }\n}",lang:"js"}),a.a.createElement("h3",{id:"new\u65b9\u6cd5"},a.a.createElement(r["AnchorLink"],{to:"#new\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"new\u65b9\u6cd5"),a.a.createElement(o["a"],{code:"// \u5173\u952e\uff1a\u5c31\u662f\u4f7fobj\u7684\u539f\u578b\u6307\u5411\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\nfunction createFactory(Constructor, ...args){\n    let obj = {};\n    \n    // \u4fee\u6b63obj\u7684\u539f\u578b\u6307\u5411\uff0c\u6216\u8005\u5199\u6210\uff1aobj.__proto__ = Constructor.prototype\uff0c\u662f\u4e00\u4e2a\u610f\u601d\n    let F = Function(){};\n    F.prototype = Constructor.prototype;\n    obj = new F();\n    \n    // \u6267\u884c\u6784\u9020\u51fd\u6570\n    let result = Constructor.apply(obj, args);\n    \n    // \u8fd4\u56de\u5b9e\u4f8b\uff0c\u6216\u8005\u6784\u9020\u51fd\u6570\u7684\u8fd4\u56de\u503c\n    return typeof result === 'object' ? result : obj;\n}",lang:"js"}),a.a.createElement("h3",{id:"instanceof\u65b9\u6cd5"},a.a.createElement(r["AnchorLink"],{to:"#instanceof\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"instanceof\u65b9\u6cd5"),a.a.createElement(o["a"],{code:"// \u5173\u952e\uff1a\u5c31\u662f\u5224\u65adL\u7684\u539f\u578b\u94fe\u4e0a\u80fd\u5426\u627e\u5230R\u7684\u539f\u578b\nfunction myInstanceof(L, R){\n    let O = R.prototype;\n    while(true){\n        if(L === null){\n            return false;\n        }\n        if(L === O){\n            return true;\n        }\n        L = L.__proto__;\n    }\n}",lang:"js"}),a.a.createElement("h3",{id:"\u4f7f\u7528instanceof\u5224\u65ad\u57fa\u672c\u6570\u636e\u7c7b\u578b"},a.a.createElement(r["AnchorLink"],{to:"#\u4f7f\u7528instanceof\u5224\u65ad\u57fa\u672c\u6570\u636e\u7c7b\u578b","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u4f7f\u7528instanceof\u5224\u65ad\u57fa\u672c\u6570\u636e\u7c7b\u578b"),a.a.createElement(o["a"],{code:"// \u56fa\u5b9a\u5199\u6cd5\nclass PrimitiveNumber{\n    static [Symbol.hasInstance](x){\n        return typeof x === 'number';\n    }\n}\nconsole.log(111 instanceof PrimitiveNumber);",lang:"js"}),a.a.createElement("h3",{id:"apply\u4e0ecall\u4e0ebind\u65b9\u6cd5"},a.a.createElement(r["AnchorLink"],{to:"#apply\u4e0ecall\u4e0ebind\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"apply\u4e0ecall\u4e0ebind\u65b9\u6cd5"),a.a.createElement(o["a"],{code:"// apply\uff0c\u53c2\u6570\u662f\u4e00\u4e2a\u6570\u7ec4\nFunction.protoype.myApply = function(context, args){\n    context = context || window; // **\u5982\u679ccontext\u7b49\u4e8enull\uff0c\u51fd\u6570\u4e2d\u7684this\u5c31\u662f\u9ed8\u8ba4\u89c4\u5219\uff08\u6307\u5411windo\u5bf9\u8c61\uff09\n    context.fn = this;\n    let result = context.fn(...args);\n    delete context.fn;\n    return result;\n}\n// call\uff0c\u8ddfapply\u6ca1\u5565\u533a\u522b\uff0c\u53ea\u662f\u5728\u53c2\u6570\u7684\u533a\u522b\u4e0a\uff0c\u4e00\u4e2a\u4e00\u4e2a\u4f20\nFunction.protoype.myCall = function(context, ...args){\n    context = context || window;\n    context.fn = this;\n    let result = context.fn(...args);\n    delete context.fn;\n    return result;\n}\n// bind\uff0c\u57fa\u4e8eapply\uff0c\u53c2\u6570\u4e5f\u662f\u4e00\u4e2a\u6570\u7ec4\nFunction.protoype.myBind = function(context, args){\n    let fn = this;\n    return function(){\n        return fn.apply(context, args);\n    }\n}",lang:"js"}),a.a.createElement("h3",{id:"\u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d"},a.a.createElement(r["AnchorLink"],{to:"#\u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d"),a.a.createElement(o["a"],{code:"// \u6d45\u62f7\u8d1d\nfunction shallowClone(obj){\n    var reasult = {};\n    for(var key in obj){\n        if(target.hasOwnProperty(key)){\n            result[key] = obj[key];\n        }\n    }\n}\n// \u6df1\u62f7\u8d1d - \u9012\u5f52\u7248\u672c\nfunction deepClone(obj){\n    if(typeof obj === 'null') return obj;\n    if(obj instanceof Date) return new Date(obj);\n    if(obj instanceof RegExp) return new RegExp(obj);\n    if(typeof obj !== 'object') return obj;\n    let cloneObj = {};\n    for(let key in obj){\n        if(obj.hasOwnProperty(key)){\n            cloneObj[key] = deepClone(obj[key]);\n        }\n    }\n}\n// \u6df1\u62f7\u8d1d - \u975e\u9012\u5f52\u7248\u672c",lang:"js"}),a.a.createElement("h3",{id:"\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f"},a.a.createElement(r["AnchorLink"],{to:"#\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f"),a.a.createElement(o["a"],{code:"// \u7f13\u5b58\u4e00\u4e2a\u76d1\u542c\u5217\u8868\nfunction event{\n    let listener = [];\n    function on(l){\n        listener.push(l);\n    }\n    function emit(){\n        listener.forEach(l => l());\n    }\n}",lang:"js"}),a.a.createElement("h3",{id:"\u89c2\u5bdf\u8005\u6a21\u5f0f"},a.a.createElement(r["AnchorLink"],{to:"#\u89c2\u5bdf\u8005\u6a21\u5f0f","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u89c2\u5bdf\u8005\u6a21\u5f0f"),a.a.createElement(o["a"],{code:"// \u88ab\u89c2\u5bdf\u8005\uff0c\u6709\u72b6\u6001\u5c5e\u6027\uff0c\u4ee5\u53ca\u66f4\u65b0\u72b6\u6001\u548c\u6ce8\u518c\u89c2\u5bdf\u8005\u7684\u65b9\u6cd5\nclass Subject(){\n    constuctor(){\n        this.state = '';\n    \tthis.observer = [];\n\t}\n    \n    attach(o){\n        this.observer.push(o);\n    }\n    \n    setState(state){\n        this.state = state;\n\t\tthis.observer.forEach(o => o.update(state));\n    }\n}\n// \u89c2\u5bdf\u8005\uff0c\u6709\u89c2\u5bdf\u5230\u53d8\u5316\u65f6\u7684\u56de\u8c03\nclass Observer(){\n    constructor(){ }\n    \n    update(state){\n        \n\t}\n}",lang:"js"}),a.a.createElement("h3",{id:"promise"},a.a.createElement(r["AnchorLink"],{to:"#promise","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"Promise"),a.a.createElement("h4",{id:"\u6700\u7b80\u7248"},a.a.createElement(r["AnchorLink"],{to:"#\u6700\u7b80\u7248","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u6700\u7b80\u7248"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u7528\u6237",a.a.createElement("code",null,"new Promise"),"\u65f6\uff0c\u6267\u884c\u5668\u51fd\u6570",a.a.createElement("code",null,"executor"),"\u4f1a\u5728\u5f53\u524d\u6267\u884c\u6808\u4e2d\u88ab\u7acb\u5373\u6267\u884c"),a.a.createElement("li",null,"\u5305\u88c5\u4e00\u4e2a",a.a.createElement("code",null,"resolve"),"\u51fd\u6570\u548c\u4e00\u4e2a",a.a.createElement("code",null,"reject"),"\u51fd\u6570\uff0c\u7528\u6237\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e24\u4e2a\u51fd\u6570\u5206\u522b\u4f20\u5165\u6210\u529f\u7ed3\u679c\u548c\u5931\u8d25\u7ed3\u679c"),a.a.createElement("li",null,a.a.createElement("code",null,"reslove"),"\u548c",a.a.createElement("code",null,"reject"),"\u53ea\u80fd\u8c03\u7528\u5176\u4e2d\u4e00\u4e2a\uff0c\u4e00\u65e6\u6210\u529f\u5c31\u4e0d\u80fd\u5931\u8d25\uff0c\u53cd\u4e4b\u4ea6\u7136"),a.a.createElement("li",null,"\u652f\u6301then\u65b9\u6cd5\uff0c\u6839\u636e\u7528\u6237\u8c03\u7528\u7684",a.a.createElement("code",null,"resolve"),"\u548c",a.a.createElement("code",null,"reject"),"\uff0c\u8fd4\u56de\u4e0d\u540c\u7684\u6570\u636e"),a.a.createElement("li",null,"\u6267\u884c\u5668\u5185\u90e8\u629b\u9519\uff0c",a.a.createElement("code",null,"try...catch"),"\u6355\u83b7\u9519\u8bef")),a.a.createElement(o["a"],{code:"const PENDING = 'PENDING';\nconst FULLFILLED = 'FULLFILLED';\nconst REJECTED = 'REJECTED';\nclass Promise(){\n    constructor(executor){\n        this.value = undefined;\n        this.reason = undefined;\n        this.status = PENDING;\n        // \u5305\u88c5resolve\u51fd\u6570\n        let resolve = (value) => {\n            if(this.status === PENDING){\n                this.value = value;\n                this.status = FULLFILLED;\n            }\n        }\n        // \u5305\u88c5reject\u51fd\u6570\n        let reject = (reason) => {\n            if(this.status === PENDING){\n                this.reason = reason;\n                this.status = REJECTED; \n            }\n        }\n        // \u6355\u83b7\u6267\u884c\u5668\u5185\u90e8\u7684\u9519\u8bef\n        try{\n            executor(resolve, reject);\n        }catch(e){\n            reject(e);\n        }\n    }\n    \n    // then\uff0c\u6839\u636epromise\u7684\u72b6\u6001\u6765\u8c03\u7528\u4e0d\u540c\u7684\u56de\u8c03\n    then(onFullfilled, onRejected){\n        if(this.status === FULLFILLED){\n            onFullfilled(this.value);\n        }\n        if(this.status === REJECTED){\n            onRejected(this.value);\n        }\n    }\n}",lang:"js"}),a.a.createElement("h4",{id:"\u6267\u884c\u5668\u5185\u90e8\u652f\u6301\u5f02\u6b65"},a.a.createElement(r["AnchorLink"],{to:"#\u6267\u884c\u5668\u5185\u90e8\u652f\u6301\u5f02\u6b65","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u6267\u884c\u5668\u5185\u90e8\u652f\u6301\u5f02\u6b65"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u5982\u679c\u662f\u540c\u6b65\uff0c\u5e94\u8be5\u662f\u7528\u6237\u5148resolve\u6216reject\uff0c\u518d\u8d70then\uff0cpromise\u5185\u90e8\u8c03\u7528then\u91cc\u9762\u7684",a.a.createElement("code",null,"onFullfilled"),"\u6216",a.a.createElement("code",null,"onRejected"),"\u8fd4\u56de\u7ed3\u679c"),a.a.createElement("li",null,"\u4f46\u662f\u7528\u6237\u53ef\u4ee5\u5f02\u6b65resolve\u6216reject\uff0c\u56e0\u6b64\u8fd9\u5c31\u4f1a\u5148\u8d70then"),a.a.createElement("li",null,a.a.createElement("strong",null,"\u89e3\u51b3\u65b9\u6848"),"\uff1a\u5148\u8d70then\uff0c\u90a3\u5c31\u628a",a.a.createElement("code",null,"onFullfilled"),"\u6216",a.a.createElement("code",null,"onRejected"),"\u5b58\u50a8\u8d77\u6765\uff0c\u5f53\u7528\u6237\u5f02\u6b65\u8c03resolve\u6216reject\u65f6\uff0c\u6839\u636e\u8c03\u7528\u7684\u4e0d\u540c\u60c5\u51b5\u518d\u4f9d\u6b21\u6e05\u7a7a\u56de\u8c03")),a.a.createElement(o["a"],{code:"class Promise(){\n    constructor(executor){\n        // ...\n        this.onResolvedCallbacks = []; // \u5b58\u50a8\u6210\u529f\u56de\u8c03\n        this.onRejectedCallbacks = []; // \u5b58\u50a8\u5931\u8d25\u56de\u8c03\n        \n        let resolve = (value) => {\n            if(this.status === PENDING){\n                // ...\n                this.onResolvedCallbacks.forEach(fn => fn());\n            }\n        }\n        \n        let reject = (reason) => {\n            if(this.status === PENDING){\n                // ...\n                this.onRejectedCallbacks.forEach(fn => fn());\n            }\n        }\n        // ...\n    }\n    \n    // then\uff0c\u6839\u636epromise\u7684\u72b6\u6001\u6765\u8c03\u7528\u4e0d\u540c\u7684\u56de\u8c03\n    then(onFullfilled, onRejected){\n        // ...\n        if(this.status === PENDING){\n            this.onResolvedCallback.push(()=>onFullfilled(this.value));\n            this.onResolvedCallback.push(()=>onRejected(this.reason));\n        } \n    }\n}",lang:"js"}),a.a.createElement("h4",{id:"\u652f\u6301\u94fe\u5f0f\u8c03\u7528then"},a.a.createElement(r["AnchorLink"],{to:"#\u652f\u6301\u94fe\u5f0f\u8c03\u7528then","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u652f\u6301\u94fe\u5f0f\u8c03\u7528then"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u652f\u6301\u4e00\u76f4\u8c03\u7528then\u65b9\u6cd5"),a.a.createElement("li",null,"\u6355\u83b7\u7528\u6237\u5728",a.a.createElement("code",null,"onFullfilled"),"\u6216",a.a.createElement("code",null,"onRejected"),"\u5185\u90e8\u629b\u51fa\u7684\u5f02\u5e38"),a.a.createElement("li",null,a.a.createElement("strong",null,"\u89e3\u51b3\u65b9\u6848"),"\uff1athen\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u5c31\u662f\u4e00\u4e2apromise")),a.a.createElement(o["a"],{code:"class Promise(){\n    constructor(executor){\n    \t// ...    \n    }\n    \n    then(onFullfilled, onRejected){\n        // \u8fd4\u56de\u53e6\u4e00\u4e2apromise\uff0c\u652f\u6301\u94fe\u5f0f\u8c03\u7528\n        let p = new Promise((resolve, reject) => {\n            if(this.status === FULLFILLED){\n                try{\n                    let x = onFullfilled(this.value);\n                    // todo resolvePromise\n                }catch(e){\n                    reject(e);\n                }\n            }\n            if(this.status === REJECTED){\n                try{\n                    let x = onRejected(this.value);\n                    // todo resolvePromise\n                }catch(e){\n                    reject(e);\n                }\n            }\n            if(this.status === PENDING){\n                this.onResolvedCallback.push(() => {\n                    try{\n                    \tlet x = onFullfilled(this.value)\n                        // todo resolvePromise\n                    }catch(e){\n                        reject(e);\n                    }\n                });\n                this.onResolvedCallback.push(() => {\n                    try{\n                    \tlet x = onRejected(this.reason)\n                        // todo resolvePromise\n                    }catch(e){\n                        reject(e);\n                    }\n                });\n            }\n        })\n        return p;\n    }\n}",lang:"js"}),a.a.createElement("h4",{id:"\u652f\u6301\u94fe\u4e2d\u6709\u7a7a\u7684then"},a.a.createElement(r["AnchorLink"],{to:"#\u652f\u6301\u94fe\u4e2d\u6709\u7a7a\u7684then","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u652f\u6301\u94fe\u4e2d\u6709\u7a7a\u7684then"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u7a7a\u7684then\u53ea\u662f\u4e0d\u5904\u7406\u4e0a\u4e00\u5c42\u7684\u7ed3\u679c\uff0c\u4f46\u4ecd\u9700\u8981\u628a\u4e0a\u4e00\u5c42\u7684\u7ed3\u679c\u4f20\u9012\u7ed9\u4e0b\u4e00\u5c42\u5904\u7406"),a.a.createElement("li",null,"\u5982\u679c\u6ca1\u6709\u4f20",a.a.createElement("code",null,"onFullfilled"),"\uff0c\u90a3\u4e48\u6210\u529f\u6001\u7684\u7ed3\u679c\u5c06\u4f1a\u4e00\u76f4\u5f80\u4e0b\u4f20\u9012\uff0c",a.a.createElement("code",null,"onRejected"),"\u4e5f\u4e00\u6837"),a.a.createElement("li",null,"\u5185\u90e8\u5305\u88c5\u4e00\u4e2a\u5047\u7684",a.a.createElement("code",null,"onFullfilled"),"\u548c",a.a.createElement("code",null,"onRejected"))),a.a.createElement(o["a"],{code:"class Promise(){\n    constructor(executor){\n    \t// ...    \n    }\n    \n    then(onFullfilled, onRejected){\n        onFullfilled = typeof onFullfilled === 'function' ? onFullfilled : v => v;\n        onRejected = typeof onRejected === 'function' ? onRejected : err => {throw err};\n        \n        // ...\n    }\n}",lang:"js"}),a.a.createElement("h4",{id:"then\u7684\u8fd4\u56de\u503c\u4f20\u9012\u7ed9\u4e0b\u4e00\u5c42then"},a.a.createElement(r["AnchorLink"],{to:"#then\u7684\u8fd4\u56de\u503c\u4f20\u9012\u7ed9\u4e0b\u4e00\u5c42then","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"then\u7684\u8fd4\u56de\u503c\u4f20\u9012\u7ed9\u4e0b\u4e00\u5c42then"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u65e0\u8bba\u662f",a.a.createElement("code",null,"onFullfilled"),"\u6216",a.a.createElement("code",null,"onRejected"),"\u7684\u8fd4\u56de\u503c\uff0c\u90fd\u540c\u7b49\u5904\u7406\uff0c\u53ea\u8981\u4e0d\u662f\u9519\u8bef\uff0c\u90fd\u5e94\u8be5\u8c03\u7528resolve\u4f20\u7ed9\u4e0b\u4e00\u5c42"),a.a.createElement("li",null,"\u5904\u7406then\u7684\u8fd4\u56de\u503c\uff0c\u5982\u679c\u662f\u666e\u901a\u503c\uff08\u4e0d\u662f\u9519\u8bef\u4e0d\u662fpromise\uff09\uff0c\u4f20\u9012\u7ed9\u4e0b\u4e00\u5c42\u7684\u6210\u529f\u4e2d\uff0c\u51fa\u9519\u60c5\u51b5\uff0c\u4f20\u9012\u7ed9\u4e0b\u4e00\u5c42\u7684\u5931\u8d25\u4e2d"),a.a.createElement("li",null,"\u5982\u679cthen\u7684\u8fd4\u56de\u503c\u662f\u4e00\u4e2apromise\uff08",a.a.createElement("strong",null,"\u5224\u65ad\u4e00\u4e2a\u503c\u662f\u5426\u4e3apromise"),"\uff09\uff0c\u5e94\u8be5\u5c06promise\u7684\u6700\u540e\u8fd4\u56de\u503c\uff08\u666e\u901a\u503c\uff09\u4f20\u9012\u7ed9\u4e0b\u4e00\u5c42"),a.a.createElement("li",null,"\u517c\u5bb9\u5176\u4ed6\u5e93\u7684\u4e0d\u89c4\u8303\uff0c\u4e00\u65e6\u6210\u529f\u5c31\u4e0d\u80fd\u5931\u8d25\uff0c\u53cd\u4e4b\u4ea6\u7136")),a.a.createElement(o["a"],{code:"class Promise(){\n    constructor(executor){\n    \t// ...    \n    }\n    \n    then(onFullfilled, onRejected){\n        onFullfilled = typeof onFullfilled === 'function' ? onFullfilled : v => v;\n        onRejected = typeof onRejected === 'function' ? onRejected : err => {throw err};\n        \n        // \u8fd4\u56de\u53e6\u4e00\u4e2apromise\uff0c\u652f\u6301\u94fe\u5f0f\u8c03\u7528\n        let p = new Promise((resolve, reject) => {\n            if(this.status === FULLFILLED){\n                try{\n                    let x = onFullfilled(this.value);\n                    resolvePromise(x, resolve, reject);\n                }catch(e){\n                    reject(e);\n                }\n            }\n            if(this.status === REJECTED){\n                try{\n                    let x = onRejected(this.value);\n                    resolvePromise(x, resolve, reject);\n                }catch(e){\n                    reject(e);\n                }\n            }\n            if(this.status === PENDING){\n                this.onResolvedCallback.push(() => {\n                    try{\n                    \tlet x = onFullfilled(this.value)\n                        resolvePromise(x, resolve, reject);\n                    }catch(e){\n                        reject(e);\n                    }\n                });\n                this.onResolvedCallback.push(() => {\n                    try{\n                    \tlet x = onRejected(this.reason)\n                        resolvePromise(x, resolve, reject);\n                    }catch(e){\n                        reject(e);\n                    }\n                });\n            }\n        })\n        return p;\n    }\n}\n\nfunction resolvePromise(x, resolve, reject){\n    let called; // \u522b\u4eba\u7684promise\u53ef\u80fdresolve\u4e86\u53c8reject\n    if((typeof x === 'object' && typeof x !== null) || typeof x === 'function'){\n\t\ttry{\n            let then = x.then;\n            if(typeof then === 'function'){\n                // \u5982\u679c\u662fpromise\uff0c\u5e94\u8be5\u8c03\u7528then\uff0c\u62ff\u5230\u6700\u7ec8\u7ed3\u679c\u8fd4\u56de\n                then.call(x, y => {\n                    if(called)return;\n                    called = true;\n                    resolvePromise(y, resolve, reject); // y\u53ef\u80fd\u8fd8\u662f\u4e00\u4e2apromise\n                }, e => {\n                    if(called)return;\n                    called = true;\n                    reject(e);\n                })\n            }else{\n                resolve(x);\n            }\n        }catch(e){\n            if(called)return;\n            called = true;\n            reject(e); // x.then\u53d6\u503c\u51fa\u9519\n        }\n    }else{\n        resolve(x);\n    }\n}",lang:"js"}),a.a.createElement("h4",{id:"\u9632\u6b62\u5faa\u73af\u5f15\u7528"},a.a.createElement(r["AnchorLink"],{to:"#\u9632\u6b62\u5faa\u73af\u5f15\u7528","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u9632\u6b62\u5faa\u73af\u5f15\u7528"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u4e3a\u4fdd\u8bc1\u5728promise\u6267\u884c\u5668\u51fd\u6570\u5185\u90e8\u62ff\u5230promise\u7684\u5b9e\u4f8b\uff0c\u4f7f\u7528\u5b8f\u4efb\u52a1"),a.a.createElement("li",null,"\u6839\u636e\u4e0a\u4e00\u4e13\u9898\uff0c\u5982\u679cthen\u5185\u90e8\u8fd4\u56de\u4e00\u4e2apromise\uff0c\u5c31\u8981\u7b49\u5f85\u8fd9\u4e2apromise\u8fd4\u56de\u6700\u7ec8\u7ed3\u679c\uff0c\u518d\u4f20\u9012\u5230\u4e0b\u4e00\u5c42\u3002\u4f46\u662f\u5982\u679c\uff0c\u7b49\u5f85\u7684\u8fd9\u4e2apromise\u5c31\u662f\u81ea\u5df1\uff0c\u90a3\u4e48\u8fd9\u79cd\u60c5\u51b5\u5c06\u4f1a\u65e0\u6cd5\u8fdb\u884c\u4e0b\u53bb")),a.a.createElement(o["a"],{code:"class Promise(){\n    constructor(executor){\n    \t// ...    \n    }\n    \n    then(onFullfilled, onRejected){\n        onFullfilled = typeof onFullfilled === 'function' ? onFullfilled : v => v;\n        onRejected = typeof onRejected === 'function' ? onRejected : err => {throw err};\n        \n        // \u8fd4\u56de\u53e6\u4e00\u4e2apromise\uff0c\u652f\u6301\u94fe\u5f0f\u8c03\u7528\n        let p = new Promise((resolve, reject) => {\n            if(this.status === FULLFILLED){\n                setTimeout(()=>{\n                    try{\n                        let x = onFullfilled(this.value);\n                        resolvePromise(p, x, resolve, reject);\n                    }catch(e){\n                        reject(e);\n                    }\n                }, 0)\n            }\n            if(this.status === REJECTED){\n                setTimeout(()=>{\n                    try{\n                        let x = onRejected(this.value);\n                        resolvePromise(p, x, resolve, reject);\n                    }catch(e){\n                        reject(e);\n                    }\n                }, 0)\n            }\n            if(this.status === PENDING){\n                // \u8fd9\u91cc\u662f\u5f02\u6b65\u7684\uff0c\u6240\u4ee5p\u5b9e\u4f8b\u4e00\u5b9a\u80fd\u62ff\u5230\uff0c\u53ef\u4ee5\u4e0d\u52a0setTimeout\n                this.onResolvedCallback.push(() => {\n                    try{\n                    \tlet x = onFullfilled(this.value)\n                        resolvePromise(p, x, resolve, reject);\n                    }catch(e){\n                        reject(e);\n                    }\n                });\n                this.onResolvedCallback.push(() => {\n                    try{\n                    \tlet x = onRejected(this.reason)\n                        resolvePromise(p, x, resolve, reject);\n                    }catch(e){\n                        reject(e);\n                    }\n                });\n            }\n        })\n        return p;\n    }\n}\n\nfunction resolvePromise(p, x, resolve, reject){\n    if(p === x){\n        return reject(new TypeError('Chaining cycle detected for promise #<Promise>'));\n    }\n    // ...\n}",lang:"js"}),a.a.createElement("h4",{id:"\u4f7f\u7528catch\u5904\u7406\u9519\u8bef"},a.a.createElement(r["AnchorLink"],{to:"#\u4f7f\u7528catch\u5904\u7406\u9519\u8bef","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u4f7f\u7528catch\u5904\u7406\u9519\u8bef"),a.a.createElement(o["a"],{code:"class Promise(){\n    constructor(executor){\n    \t// ...    \n    }\n    \n    then(onFullfilled, onRejected){\n        // ...\n\t}\n    \n    catch(onRejected){\n        return this.then(null, onRejected);\n    }\n}",lang:"js"}),a.a.createElement("h4",{id:"promiseresolve\u548cpromisereject"},a.a.createElement(r["AnchorLink"],{to:"#promiseresolve\u548cpromisereject","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"Promise.resolve\u548cPromise.reject"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u5373\u4f7f\u6570\u636e\u4e0d\u662f\u4e00\u4e2apromise\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e24\u79cd\u65b9\u5f0f\uff0c\u5c06\u5f53\u524d\u6570\u636e\u5305\u88c5\u6210\u4e00\u4e2apromise"),a.a.createElement("li",null,"resolve\u9759\u6001\u65b9\u6cd5\uff1a\u5c06\u5f53\u524d\u6570\u636e\u5305\u88c5\u6210\u4e00\u4e2a\u6210\u529f\u6001\u7684promise"),a.a.createElement("li",null,"resolve\u9759\u6001\u65b9\u6cd5\uff1a\u5c06\u5f53\u524d\u6570\u636e\u5305\u88c5\u6210\u4e00\u4e2a\u5931\u8d25\u6001\u7684promise")),a.a.createElement(o["a"],{code:"class Promise(){\n    constructor(executor){\n    \t// ...    \n    }\n    \n    then(onFullfilled, onRejected){\n        // ...\n\t}\n    \n    catch(onRejected){\n        // ...\n    }\n    \n    static resolve(data){\n        return new Promise((resolve, reject) => {\n            resolve(data);\n        })\n    }\n    \n    static reject(err){\n        return new Promise((resolve, reject) => {\n            reject(err);\n        })\n    }\n}",lang:"js"}),a.a.createElement("h4",{id:"promiseprototypefinally"},a.a.createElement(r["AnchorLink"],{to:"#promiseprototypefinally","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"Promise.prototype.finally"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u65e0\u8bba\u5982\u4f55\u90fd\u4f1a\u6267\u884c"),a.a.createElement("li",null,"\u8c03\u7528\u5f53\u524dpromise\u7684then\uff0c\u628a\u4e0a\u4e00\u5c42\u7684\u7ed3\u679c\u4f20\u9012\u5230finally\u8fd9\u4e00\u5c42\uff0c\u5e76\u4e14\u6839\u636e\u6210\u529f\u6001\u8fd8\u662f\u5931\u8d25\u6001\uff0c\u5c06\u7ed3\u679c\u4f20\u9012\u5230finally\u7684\u4e0b\u4e00\u5c42"),a.a.createElement("li",null,"callback\u91cc\u9762\u53ef\u80fd\u4f1a\u8fd4\u56de\u4e00\u4e2a\u975epromise\u7684\u503c\uff0c\u6240\u4ee5\u9700\u8981\u5305\u88c5\u6210\u4e00\u4e2apromise\uff0c\u7edf\u4e00\u5904\u7406")),a.a.createElement(o["a"],{code:"Promise.prototype.finally = function(callback){\n    return this.then((value) => {\n        return Promise.resolve(callback()).then(()=>value);\n    }, (reason) => {\n        return Promise.resolve(callback()).then(() => {throw reason});\n    })\n}",lang:"js"}),a.a.createElement("h4",{id:"promisify"},a.a.createElement(r["AnchorLink"],{to:"#promisify","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"promisify"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u5c06\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u53d8\u6210promise"),a.a.createElement("li",null,"\u4e00\u822c\u7528\u4e8e\u8f6c\u5316node\u4e2d\u7684api")),a.a.createElement(o["a"],{code:"const promisify = (fn) =>\n (...args) => new Promise((resolve, reject) => {\n     fn(...args, function (err, data) {\n         if(err)reject(err);\n         resolve(data);\n     });\n });",lang:"js"}),a.a.createElement("h4",{id:"promiseall"},a.a.createElement(r["AnchorLink"],{to:"#promiseall","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"Promise.all"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u7b49\u5f85\u6240\u6709\u7684\u7ed3\u679c\uff0c\u4e00\u6b21\u8fd4\u56de")),a.a.createElement(o["a"],{code:"/**\u5224\u65ad\u662f\u5426\u4e3apromise**/\nconst isPromise = (value) => typeof value.then === 'function';\n/**all**/\nPromise.all = (promises) => {\n return new Promise((resolve, reject) => {\n     let result = []; // \u5b58\u653e\u8fd4\u56de\u7ed3\u679c\n     let count = 0; // promise\u5b8c\u6210\u8ba1\u6570\u5668\n     const setResult = (index, value) => {\n         result[index] = value;\n         if (++count === promises.length) {\n             resolve(result);\n         }\n     }\n     for (let i = 0; i < promises.length; i++) {\n         let p = promises[i];\n         if (isPromise(p)) {\n             p.then(data => {\n                 setResult(i, data);\n             }, err => {\n                 reject(err);\n             })\n         } else {\n             setResult(i, p);\n         }\n     }\n })\n}",lang:"js"}),a.a.createElement("h4",{id:"promiserace"},a.a.createElement(r["AnchorLink"],{to:"#promiserace","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"Promise.race"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u8c01\u5148\u8fd4\u56de\u5c31\u7528\u8c01\u7684\u7ed3\u679c\uff0c\u5176\u4ed6\u7ed3\u679c\u5168\u88ab\u820d\u5f03")),a.a.createElement(o["a"],{code:"/**race**/\nPromise.race = (promises) => {\n return new Promise((resolve,reject)=>{\n     for (let i = 0; i < promises.length; i++) {\n         const p = promises[i];\n         if (isPromise(p)) {\n             p.then(resolve, reject);\n         } else {\n             resolve(p);\n         }\n     }\n })\n}",lang:"js"}),a.a.createElement("h4",{id:"\u4e2d\u65adpromise\u820d\u5f03\u7ed3\u679c"},a.a.createElement(r["AnchorLink"],{to:"#\u4e2d\u65adpromise\u820d\u5f03\u7ed3\u679c","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u4e2d\u65adpromise\uff08\u820d\u5f03\u7ed3\u679c\uff09"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u5229\u7528promise.race\u7684\u7279\u6027\uff0c\u53ea\u8981\u5176\u4e2d\u4e00\u4e2a\u8fd4\u56de\u4e86\uff0c\u5c31\u820d\u5f03\u53e6\u5916\u7684promise\u7684\u7ed3\u679c")),a.a.createElement(o["a"],{code:"/**\u4e2d\u65ad\u4e00\u4e2aPromise**/\nconst wrap = (p) => {\n let abort;\n let newP = new Promise((resolve,reject)=>{\n     abort = reject;\n });\n let raceP = Promise.race([p,newP]);\n raceP.abort = abort;\n return raceP;\n}",lang:"js"}),a.a.createElement("h4",{id:"\u4e2d\u65adpromisethen\u94fe"},a.a.createElement(r["AnchorLink"],{to:"#\u4e2d\u65adpromisethen\u94fe","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u4e2d\u65adpromise.then\u94fe"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u8fd4\u56de\u4e00\u4e2a\u5373\u4e0d\u4f1a\u8c03\u7528\u6210\u529f\uff0c\u4e5f\u4e0d\u4f1a\u8c03\u7528\u5931\u8d25\u7684promise")),a.a.createElement(o["a"],{code:"Promise.resolve(100).then().then(()=>{\n     // \n    return new Promise((resolve,reject)=>{});\n}).then(data=>console.log(data));",lang:"js"}),a.a.createElement("h3",{id:"co\u5e93"},a.a.createElement(r["AnchorLink"],{to:"#co\u5e93","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"co\u5e93"),a.a.createElement(o["a"],{code:"// \u5f02\u6b65\u8fed\u4ee3\uff0c\u53c2\u6570it\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\nfunction co(it){\n    return new Promise((resolve,reject) => {\n        function next(data){\n\t\t\tlet {value, done} = it.next(data);\n            if(!done){\n                // \u5c06\u8fd9\u4e00\u6b21\u8fed\u4ee3\u7684\u7ed3\u679c\u4f20\u9012\u7ed9\u4e0b\u4e00\u6b21\u7684\u8fed\u4ee3\n                Promise.resolve(value).then(next, reject);\n            }else{\n                resolve(value);\n            }\n        }\n        next();\n    })\n}",lang:"js"}),a.a.createElement("h3",{id:"eventemitter"},a.a.createElement(r["AnchorLink"],{to:"#eventemitter","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"EventEmitter"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("code",null,"on"),"\uff1a\u6ce8\u518c\u8ba2\u9605"),a.a.createElement("li",null,a.a.createElement("code",null,"once"),"\uff1a\u6ce8\u518c\u8ba2\u9605\uff0c\u53ea\u8ba2\u9605\u4e00\u6b21"),a.a.createElement("li",null,a.a.createElement("code",null,"off"),"\uff1a\u53d6\u6d88\u8ba2\u9605"),a.a.createElement("li",null,a.a.createElement("code",null,"emit"),"\uff1a\u53d1\u5e03"),a.a.createElement("li",null,a.a.createElement("code",null,"newListener"),"\uff1a\u76d1\u542c",a.a.createElement("code",null,"on"),"\u8ba2\u9605\u4e8b\u4ef6\u7684\u53d1\u751f")),a.a.createElement(o["a"],{code:"function EventEmitter() {\n this.events = {}; // \u7f13\u5b58\u8ba2\u9605\u7684\u4e8b\u4ef6\n}\n\n/**on**/\nEventEmitter.prototype.on = function (eventName, callback) {\n // \u5982\u679c\u8ba2\u9605\u7684\u7c7b\u578b\u4e0d\u662fnewListener\uff0c\u5219\u7acb\u5373\u53d1\u5e03\u4e00\u6b21newListener\u7684\u56de\u8c03\n if(eventName !== 'newListener'){\n     this.emit('newListener', eventName);\n }\n\n // \u5c06\u8ba2\u9605\u7684\u56de\u8c03\u51fd\u6570\u7f13\u5b58\u8d77\u6765\n (this.events[eventName] || (this.events[eventName] = [])).push(callback);\n}\n\n/**once**/\nEventEmitter.prototype.once = function (eventName, callback) {\n // \u589e\u5f3a\u7528\u6237\u4f20\u8fdb\u6765\u7684callback\n // \u5982\u679ceventName\u7b2c\u4e00\u6b21\u53d1\u5e03\u65f6\uff0c\u9664\u4e86\u4f1a\u8c03\u7528\u7528\u6237\u7684callback\uff0c\u8fd8\u4f1a\u6ce8\u9500\u8fd9\u4e2aeventName\n let once = (...args) => {\n     callback(...args);\n     this.off(eventName, callback);\n }\n once.listener = callback;\n this.on(eventName, once);\n}\n\n/**off**/\nEventEmitter.prototype.off = function (eventName, callback) {\n // cb!==callback\uff1aon\u8ba2\u9605\n // cb.listener !== callback\uff1aonce\u8ba2\u9605\n this.events[eventName] = this.events[eventName].filter(cb=>(cb!==callback) && (cb.listener !== callback));\n}\n\n/**emit**/\nEventEmitter.prototype.emit = function (eventName, ...args) {\n // \u904d\u5386\u7f13\u5b58\uff0c\u5c06\u6240\u6709eventName\u7684\u8ba2\u9605\u56de\u8c03\u51fd\u6570\u53d6\u51fa\u6765\u4e00\u4e2a\u4e00\u4e2a\u6267\u884c\n (this.events[eventName] || []).forEach(cb => {\n     cb(...args);\n });\n}\n\nmodule.exports = EventEmitter;",lang:"js"}),a.a.createElement("h3",{id:"koa\u6846\u67b6\u4e2d\u7684compose\u65b9\u6cd5"},a.a.createElement(r["AnchorLink"],{to:"#koa\u6846\u67b6\u4e2d\u7684compose\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"koa\u6846\u67b6\u4e2d\u7684compose\u65b9\u6cd5"),a.a.createElement("ul",null,a.a.createElement("li",null,"koa\u4e2d\uff0c\u4e2d\u95f4\u4ef6\u7684\u6267\u884c\u673a\u5236\u5c31\u662f\u4e00\u4e2a\u6d0b\u8471\u6a21\u578b\uff0c\u4e00\u5c42\u5305\u88f9\u7740\u4e00\u5c42\uff0c\u4ee5\u8c03\u7528next\u8fdb\u5165\u4e0b\u4e00\u5c42"),a.a.createElement("li",null,"next\u524d\u4f5c\u4e3a\u5916\u5c42\u5de6\u4fa7\uff0cnext\u540e\u4f5c\u4e3a\u5916\u5c42\u53f3\u4fa7\uff0c\u4ee3\u7801\u7684\u6267\u884c\u987a\u5e8f\u4ee5\u4e00\u652f\u7bad\u4ece\u5de6\u5f80\u53f3\u5c04\u7a7f\u6d0b\u8471\u7684\u987a\u5e8f\uff0c\u4ece\u5de6\u5f80\u53f3\u6267\u884c")),a.a.createElement(o["a"],{code:"let middlewares = [\n    (ctx, next) => { console.log(1); next(); console.log(11) },\n    (ctx, next) => { console.log(2); next(); console.log(22) },\n    (ctx, next) => { console.log(3); next(); console.log(33) },\n    (ctx, next) => { console.log(4); next(); console.log(44) },\n    (ctx, next) => { console.log(5); next(); console.log(55) },\n];\nconst compose = (ctx) => {\n    if (middlewares.length) {\n        middlewares.reduce((sum, current) => {\n            return Promise.resolve(current(ctx, () => sum))\n        }, Promise.resolve())\n    }\n    return Promise.resolve();\n}\ncompose(null);",lang:"js"}),a.a.createElement("h3",{id:"nodejs\u4e2d\u7684require\u65b9\u6cd5"},a.a.createElement(r["AnchorLink"],{to:"#nodejs\u4e2d\u7684require\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"Nodejs\u4e2d\u7684require\u65b9\u6cd5"),a.a.createElement("ul",null,a.a.createElement("li",null,"Module.prototype.require\uff0c\u7528\u6237\u4f7f\u7528require\u5f15\u5165\u6a21\u5757\u65f6\uff0c\u4f1a\u81ea\u52a8\u8c03\u7528\u6b64\u65b9\u6cd5"),a.a.createElement("li",null,"Module._load\uff0c\u8fd4\u56de\u503c\u662fmodule.exports"),a.a.createElement("li",null,"Module._resolveFilename\uff0c\u83b7\u53d6\u6a21\u5757\u7684\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\u3002\u6dfb\u52a0.js\uff0c.json\uff0c.node\u540e\u7f00\u540d"),a.a.createElement("li",null,"Module._cache\uff0c\u67e5\u770b\u6a21\u5757\u662f\u5426\u5df2\u7ecf\u88ab\u7f13\u5b58"),a.a.createElement("li",null,"\u6839\u636eid\u548cparent\uff0c\u521b\u5efa\u65b0\u7684\u6a21\u5757\u5bf9\u8c61"),a.a.createElement("li",null,"\u7f13\u5b58\u8fd9\u4e2a\u6a21\u5757\u5bf9\u8c61"),a.a.createElement("li",null,"tryModuleLoad\u5c1d\u8bd5\u53bb\u52a0\u8f7d\u8be5\u6a21\u5757"),a.a.createElement("li",null,"Module.prototype.load\uff0cmodule.load\u52a0\u8f7d\u5f53\u524d\u6a21\u5757"),a.a.createElement("li",null,"\u6839\u636eModule._extensions\u7684\u7b56\u7565\u6a21\u5f0f\uff0c\u67e5\u627e\u6269\u5c55\u540d\u5bf9\u5e94\u8c03\u7528\u76f8\u5e94\u7684\u7b56\u7565\u51fd\u6570\u5e76\u4e14\u8c03\u7528\u5b83"),a.a.createElement("li",null,"js\u6587\u4ef6\u7684\u7b56\u7565\u51fd\u6570\uff1a",a.a.createElement("ul",null,a.a.createElement("li",null,"\u83b7\u53d6\u6587\u4ef6\u5185\u5bb9"),a.a.createElement("li",null,"\u8c03\u7528Module.prototype._compile\u65b9\u6cd5"),a.a.createElement("li",null,"Module.wrap\u65b9\u6cd5\uff0c\u4f7f\u7528(function (exports, require, module, _filename, _dirname)","{","}",")()\u628a\u6587\u4ef6\u5185\u5bb9\u5305\u88c5\u6210\u4e00\u4e2a\u81ea\u6267\u884c\u51fd\u6570"),a.a.createElement("li",null,"\u63d0\u4f9b\u4e00\u4e2a\u6c99\u7bb1\u73af\u5883\uff0c\u8fd0\u884c\u4e0a\u9762\u7684\u81ea\u6267\u884c\u51fd\u6570"),a.a.createElement("li",null,"\u6a21\u5757\u6587\u4ef6\u4e2d\uff0c\u7528\u6237\u4f1a\u7ed9module.exports\u8d4b\u503c\uff0c\u6b64\u65f6module._load\u7684\u8fd4\u56de\u503c\u5c31\u6709\u503c\u4e86"))),a.a.createElement("li",null,"json\u6587\u4ef6\u7684\u7b56\u7565\u51fd\u6570\uff1a",a.a.createElement("ul",null,a.a.createElement("li",null,"\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9"))),a.a.createElement("li",null,"\u4f7f\u7528JSON.parse()\u8fd0\u884c\u6587\u4ef6\u5185\u5bb9\uff0c\u7136\u540e\u7ed9module.exports\u8d4b\u503c"),a.a.createElement("li",null,"node\u6587\u4ef6\u7684\u7b56\u7565\u51fd\u6570\uff1a",a.a.createElement("ul",null,a.a.createElement("li",null,"\u7565")))),a.a.createElement(o["a"],{code:"let fs = require('fs');\nlet path = require('path');\nlet vm = require('vm');\n\n\n\nfunction Module(fileName) {\n this.id = fileName;\n this.exports = {};\n}\n\nModule._cache = {};\n\nModule._extensions = {\n '.js': (module, fileName) => {\n     let content = fs.readFileSync(fileName, 'utf8');\n     module._compile(content, fileName);\n },\n '.json': (module, fileName) => {\n     let content = fs.readFileSync(fileName, 'utf8');\n     module.exports = JSON.parse(content);\n },\n '.node': (module, fileName) => { }\n}\n\nModule.wrap = (code) => {\n // \u62fc\u63a5\u6210\u53ef\u6267\u884c\u51fd\u6570\u5b57\u7b26\u4e32\n let fnStr = `(function (exports, require, module, __filename, __dirname){${code}})`;\n return fnStr;\n}\n\nModule._load = (id) => {\n let cacheModule = Module._cache[id];\n if (cacheModule) {\n     return cacheModule.exports;\n }\n // \u83b7\u53d6\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\n let fileName = path.resolve(__dirname, id);\n let keys = Object.keys(Module._extensions);\n for (let i = 0; i < keys.length; i++) {\n     const key = keys[i];\n     if (fs.existsSync(fileName + key)) {\n         fileName += key;\n         break;\n     }\n }\n // \u521b\u5efa\u65b0\u7684module\u5b9e\u4f8b\n let module = new Module(fileName);\n Module._cache[id] = module;\n // \u5c1d\u8bd5\u52a0\u8f7dmodule\n tryModuleLoad(module, fileName);\n\n return module.exports;\n}\n\nconst tryModuleLoad = (module, fileName) => {\n module.load(fileName);\n}\n\nModule.prototype.load = function (fileName) {\n // \u83b7\u53d6\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u6839\u636e\u6269\u5c55\u540d\u83b7\u53d6\u7b56\u7565\u51fd\u6570\n let extName = path.extname(fileName);\n let extFn = Module._extensions[extName];\n extFn(this, fileName);\n}\n\nModule.prototype._compile = function (code, fileName) {\n let fnStr = Module.wrap(code); // \u81ea\u6267\u884c\u51fd\u6570\u7684\u5b57\u7b26\u4e32\n let fn = vm.runInThisContext(fnStr); // \u4f7f\u7528\u4e00\u4e2a\u6c99\u7bb1\u6765\u6267\u884c\u4e0a\u9762\u51fd\u6570\n let exports = this.exports;\n let require = qqRequire;\n let module = this;\n let __filename = fileName;\n let __dirname = path.dirname(fileName);\n fn.call(exports, exports, require, module, __filename, __dirname); // this\u6307\u5411exports\n}\n\n/** \u8fd9\u4e2a\u662f\u6211\u8981\u81ea\u5b9a\u4e49\u7684require **/\nconst qqRequire = Module.prototype.require = function (id) {\n return Module._load(id)\n}",lang:"js"}),a.a.createElement("h3",{id:"\u6a21\u62dfjsonp"},a.a.createElement(r["AnchorLink"],{to:"#\u6a21\u62dfjsonp","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u6a21\u62dfjsonp"),a.a.createElement(o["a"],{code:'(function jsonp(){\n    var script = document.createElement("script");\n     script.charset = "utf-8";\n     script.timeout = 120;\n     script.src = \'\';\n     document.head.appendChild(script);\n})()',lang:"js"}),a.a.createElement("h3",{id:"\u5229\u7528settimeout\u6a21\u62dfsetinterval"},a.a.createElement(r["AnchorLink"],{to:"#\u5229\u7528settimeout\u6a21\u62dfsetinterval","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u5229\u7528setTimeout\u6a21\u62dfsetInterval"),a.a.createElement(o["a"],{code:"function time(func, interval) {\n  setTimeout(function () {\n    func();// \u5904\u7406\n      \n    setTimeout(arguments.callee, interval)\n  }, interval)\n}",lang:"js"}),a.a.createElement("h3",{id:"\u5b9e\u73b0\u4e00\u4e2a\u7b80\u7248\u7684symbol"},a.a.createElement(r["AnchorLink"],{to:"#\u5b9e\u73b0\u4e00\u4e2a\u7b80\u7248\u7684symbol","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0\u4e00\u4e2a\u7b80\u7248\u7684Symbol"),a.a.createElement("blockquote",null,a.a.createElement("p",null,"\u53c2\u8003\uff1a",a.a.createElement(r["Link"],{to:"https://segmentfault.com/a/1190000015262174"},"https://segmentfault.com/a/1190000015262174")),a.a.createElement("p",null,"keyFor\u548cfor\u9759\u6001\u65b9\u6cd5\u53ef\u4ee5\u81ea\u884c\u770b\u94fe\u63a5\u539f\u6587")),a.a.createElement(o["a"],{code:"var root = this;\nvar postfix = 0;\nvar generateName = function(descString){\n\tpostfix++;\n    return `@@${descString}_${postfix}`;\n}\nvar SymbolPolyfill = function Symbol(description){\n    // Symbol\u4e0d\u80fd\u4f7f\u7528new\u5173\u952e\u5b57\n    if(this instanceof SymbolPolyfill) throw new TypeError('...');\n    \n    // \u5982\u679c\u53c2\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c31\u8c03\u7528\u8be5\u5bf9\u8c61\u7684toString\u65b9\u6cd5\u8f6c\u6210\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u53c2\u6570\n    var descString = description === undefined ? undefined : Stirng(decription);\n    \n    //\u6bcf\u4e2aSymbol\u8fd4\u56de\u503c\u90fd\u662f\u65b0\u5bf9\u8c61\uff0c\u53ea\u8981\u5f15\u7528\u4e0d\u540c\n    var symbol = Object.create({\n        // \u652f\u6301\u663e\u793a\u8f6c\u6210\u5b57\u7b26\u4e32\uff0cString(symbol)\n        toString: function(){\n            return this.__name__; // \u76f8\u540c\u7684descString\uff0c\u8fd4\u56de\u503c\u90fd\u4e0d\u4e00\u6837\n        },\n        valueOf: function(){\n            // throw new Error('...') // \u4e0d\u80fd\u4e0e\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u8fdb\u884c\u8fd0\u7b97\n            return this; // Symbol.valueOf()\u662f\u652f\u6301\u7684\n        }\n    });\n    \n    Object.defineProperties(Symbol, {\n        '__Description__': {\n            value: descString,\n            writable: false,\n            enumerable: false,\n            configurable: false\n        },\n        // Symbol\u4f5c\u4e3a\u6807\u8bc6\u7b26\uff0c\u5bf9\u4e8e\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\uff0c\u4e0d\u80fd\u540c\u540d\n        '__name__': {\n            value: generateName(descString),\n            writable: false,\n            enumerable: false,\n            configurable: false\n\t\t}\n\t})\n    \n    return symbol;\n}",lang:"js"})))}));n["default"]=e=>{var n=a.a.useContext(r["context"]),t=n.demos;return a.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.a.createElement(c,{demos:t})}}}]);