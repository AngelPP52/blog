(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[46],{DBkb:function(e,l,n){"use strict";n.r(l);var a=n("ahKI"),t=n.n(a),r=n("s8Wh"),o=n("Fesk"),c=t.a.memo((e=>{e.demos;return t.a.createElement(t.a.Fragment,null,t.a.createElement("div",{className:"markdown"},t.a.createElement("h1",{id:"webpack\u5168\u5bb6\u6876"},t.a.createElement(r["AnchorLink"],{to:"#webpack\u5168\u5bb6\u6876","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"webpack\u5168\u5bb6\u6876"),t.a.createElement("h2",{id:"webpack-flow\u7f16\u8bd1\u6d41\u7a0b"},t.a.createElement(r["AnchorLink"],{to:"#webpack-flow\u7f16\u8bd1\u6d41\u7a0b","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"webpack-flow\u7f16\u8bd1\u6d41\u7a0b"),t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("p",null,"\u521d\u59cb\u5316\u53c2\u6570\uff08\u914d\u7f6e\u6587\u4ef6\uff09      ==>"),t.a.createElement("p",null,"\u5f00\u59cb\u7f16\u8bd1\uff08",t.a.createElement("code",null,"compiler"),"\u5bf9\u8c61run\u65b9\u6cd5\uff09    ==>"),t.a.createElement("p",null,"\u7f16\u8bd1\u6a21\u5757\uff08\u6267\u884c\u5404\u79cd",t.a.createElement("code",null,"loader"),"\uff09    ==>"),t.a.createElement("p",null,"\u5b8c\u6210\u6a21\u5757\u7f16\u8bd1\uff08\u6bcf\u4e2a\u6a21\u5757\u7684\u4f9d\u8d56\u5173\u7cfb\uff09 ==>"),t.a.createElement("p",null,"\u8f93\u51fa\u8d44\u6e90\uff08\u7ec4\u88c5chunk\uff09         ==>"),t.a.createElement("p",null,"\u8f93\u51fa\u5b8c\u6210\uff08\u6587\u4ef6\u7cfb\u7edf\uff09"),t.a.createElement("ul",null,t.a.createElement("li",null,"Compiler\uff1a\u6574\u4e2awebpack\u5bf9\u8c61"),t.a.createElement("li",null,"Compilation\uff1a\u7f16\u8bd1\u5bf9\u8c61\uff0c\u6bcf\u6b21\u7f16\u8bd1\u90fd\u6709\u4e00\u4e2acompilation\u5bf9\u8c61\uff0c\u5305\u542bmodules chunks assets\u5c5e\u6027",t.a.createElement("ul",null,t.a.createElement("li",null,"module"),t.a.createElement("li",null,"chunk\uff0c\u4e00\u4e2a\u4ee3\u7801\u5757"),t.a.createElement("li",null,"chunkGroup\uff0cchunk\u5206\u7ec4"),t.a.createElement("li",null,"asset\uff0c\u4e00\u4e2a\u8d44\u6e90"),t.a.createElement("li",null,"file\uff0c\u4e00\u4e2a\u6587\u4ef6")))))),t.a.createElement("h2",{id:"webpack-loader"},t.a.createElement(r["AnchorLink"],{to:"#webpack-loader","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"webpack-loader"),t.a.createElement("blockquote",null,t.a.createElement("p",null,"why loader\uff1f\u5c06\u975ejs\u6a21\u5757\u8f6c\u6210js\u6a21\u5757"),t.a.createElement("p",null,"\u6307\u5b9a\u52a0\u8f7d\u81ea\u5b9a\u4e49loader\u7684\u65b9\u6cd5\uff1a1.rules\u7684use",t.a.createElement("strong",null,"\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84"),"\uff1b2.resolveLoader\u4e2d\u5b9a\u4e49",t.a.createElement("strong",null,"alias\u522b\u540d"),"\uff1b3.resolveLoader\u4e2d\u914d\u7f6emodules\uff0c",t.a.createElement("strong",null,"\u6307\u5b9aloader\u67e5\u627e\u76ee\u5f55")),t.a.createElement("p",null,"this\u6307\u5411\uff1f\u6307\u5411loaderContext\uff0c\u6bcf\u4e2aloader\u90fd\u6709\u81ea\u5df1\u7684\u4e0a\u4e0b\u6587\u5bf9\u8c61"),t.a.createElement("p",null,"loader-utils\u5305\u7684getOptions\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u7528\u6237\u914d\u7f6e\uff0cstringifyRequest\u5c06\u7edd\u5bf9\u8def\u5f84\u8f6c\u6210\u76f8\u5bf9\u8def\u5f84"),t.a.createElement("p",null,"loader.raw\u8bbe\u7f6e\u4e3atrue\uff1a\u544a\u8bc9webpack\u4e0d\u628a\u539f\u6587\u4ef6\u8f6c\u6210\u5b57\u7b26\u4e32\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u56fe\u7247\u6587\u4ef6")),t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("p",null,"babel-loader"),t.a.createElement("ul",null,t.a.createElement("li",null,"\u6838\u5fc3\u5305\uff1a@babel/core\uff0c@babel/preset-env\uff08\u771f\u6b63\u8fdb\u884c\u8f6c\u6362\u7684\u9884\u8bbe\u96c6\u5408\uff09"),t.a.createElement("li",null,"babel\u7684\u4f5c\u7528\uff1a\u5c06es6\u8bed\u6cd5\u8f6c\u6210es5\u8bed\u6cd5"),t.a.createElement("li",null,"pollyfill\u7684\u4f5c\u7528\uff1a\u57ab\u7247\uff0c\u9488\u5bf9\u67d0\u4e9b\u4e0d\u652f\u6301\u7684\u8bed\u6cd5\uff0c\u8fdb\u884c\u4f4e\u7248\u672c\u6d4f\u89c8\u5668\u7684\u652f\u6301\uff0c\u5982promise\u7b49")),t.a.createElement(o["a"],{code:"const babel = require('@babel/core');\nfunction loader(source, inputSourceMap){\n\t// this.request ==> loader\u8def\u5f84 + \u6587\u4ef6\u8def\u5f84\n\t// todo \u8f6c\u6362\u903b\u8f91\n    let options = {\n        presets: [\"@babel/preset-env\"],\n        inputSourceMap,\n        sourceMap: true\n    }\n    // code\uff1a\u7f16\u8bd1\u540e\u7684\u4ee3\u7801\uff0cmap\uff1a\u6620\u5c04\u6587\u4ef6\uff0cast\uff1a\u62bd\u8c61\u8bed\u6cd5\u6811\n    let {code, map, ast} = babel.transform(source, options);\n    // return code; // \u53ea\u80fd\u8fd4\u56de\u4e00\u4e2a\u503c\n    return this.callback(null, code, map, ast); // \u8fd4\u56de\u591a\u4e2a\u503c\u7684\u65b9\u5f0f\n}\nmodule.exports = loader;",lang:"js"})),t.a.createElement("li",null,t.a.createElement("p",null,"file-loader"),t.a.createElement("ul",null,t.a.createElement("li",null,"\u4e8c\u8fdb\u5236\u6587\u4ef6")),t.a.createElement(o["a"],{code:"// \u83b7\u53d6\u7528\u6237\u914d\u7f6e\u4fe1\u606f\uff0c\u7ffb\u8bd1\u914d\u7f6e\u7684\u6587\u4ef6\u540d\nconst {getOptions, interpolateName} = require('loader-utils')\nfunction loader(content){\n    // \u83b7\u53d6\u7528\u6237\u7684\u914d\u7f6e\n    let options = getOptions(this) || {}; \n    // \u6839\u636e\u914d\u7f6e\u7684\u6587\u4ef6\u540d\uff0c\u751f\u6210\u6587\u4ef6\u5b58\u653e\u7684url\n    let url = interpolateName(this, options.filename || '[hash].[ext]', content);\n    // \u53d1\u5c04\u6587\u4ef6\u5230\u6307\u5b9aurl\n    this.emitFile(url, content);\n    // \u5bfc\u51faurl\uff0c\u5f15\u7528\u6a21\u5757\u5c31\u53ef\u4ee5\u7528\u4e86\n    return `module.exports = ${JSON.stringify(url)}`; \n}\nloader.raw = true;\nmodule.exports = loader;",lang:"js"})),t.a.createElement("li",null,t.a.createElement("p",null,"url-loader"),t.a.createElement("ul",null,t.a.createElement("li",null,"\u52a0\u8f7d\u56fe\u7247\u8d44\u6e90"),t.a.createElement("li",null,"\u6700\u7ec8\u89e3\u6790\u7ed3\u679c\uff0c\u6839\u636e\u9650\u5236\u6587\u4ef6\u7684\u9608\u503c\uff0c\u751f\u6210\u5185\u8054base64\uff0c\u6216\u8005\u6587\u4ef6"))),t.a.createElement("li",null,t.a.createElement("p",null,"style-loader"),t.a.createElement("ul",null,t.a.createElement("li",null,"css\u653e\u5230style\u6807\u7b7e\u4e2d"))),t.a.createElement("li",null,t.a.createElement("p",null,"css-loader"),t.a.createElement("ul",null,t.a.createElement("li",null,"\u89e3\u51b3css\u547d\u540d\u51b2\u7a81"),t.a.createElement("li",null,"\u89e3\u51b3@import\u548curl\u5f15\u7528"),t.a.createElement("li",null,"\u5c06css\u8f6c\u6362\u6210js\u4ee3\u7801"),t.a.createElement("li",null,"\u6838\u5fc3\u5305\uff1a",t.a.createElement("ul",null,t.a.createElement("li",null,"postcss\uff08\u6d41\u6c34\u7ebf\u5904\u7406css\uff09\uff0c\u63a5\u6536\u4e00\u4e2a\u63d2\u4ef6\uff08\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff09\uff0c\u4e00\u4e2a\u4e00\u4e2a\u5730\u5904\u7406css"),t.a.createElement("li",null,"css_token_selector\uff08css\u7c7b\u578b\u540d\u9009\u62e9\u5668\uff09"))))),t.a.createElement("li",null,t.a.createElement("p",null,"less-loader"),t.a.createElement("ul",null,t.a.createElement("li",null,"less ==> css"),t.a.createElement("li",null,"less.render"))),t.a.createElement("li",null,t.a.createElement("p",null,"loader\u7684\u6267\u884c"),t.a.createElement("ul",null,t.a.createElement("li",null,"\u6267\u884c\u987a\u5e8f\uff1aloader-a.pitch ==> loader-b.pitch ==> loader-c.pitch ==> loader-c ==> loader-b ==> loader-a"),t.a.createElement("li",null,"pitch\u65b9\u6cd5",t.a.createElement("ul",null,t.a.createElement("li",null,"\u6709\u8fd4\u56de\u503c\uff0c\u610f\u5473\u7740\u81ea\u8eab\u548c\u540e\u9762\u7684loader\u90fd\u5df2\u7ecf\u6267\u884c\u5b8c\u6bd5\uff0c\u5e76\u4e14\u628a\u8fd4\u56de\u503c\u4f5c\u4e3asource\u4f20\u7ed9\u4e0a\u4e00\u4e2aloader\uff0c",t.a.createElement("strong",null,"\u540e\u9762\u7684pitch\u4e0d\u8d70\u4e86")),t.a.createElement("li",null,"\u6ca1\u8fd4\u56de\u503c\uff0c",t.a.createElement("strong",null,"\u7ee7\u7eed\u6309\u7167\u6d41\u7a0b\u8d70")),t.a.createElement("li",null,"\u53c2\u6570\uff1aremainingRequest\uff0c\u5269\u4e0b\u7684loader + \u6587\u4ef6"),t.a.createElement("li",null,"\u53c2\u6570\uff1apreviousRequest\uff0c\u4e4b\u524d\u7684loader"),t.a.createElement("li",null,"\u53c2\u6570\uff1adata\uff0c\u5bf9\u5e94loaderContext\u4e0a\u7684data"))),t.a.createElement("li",null,"loader\u6839\u636e\u8fd4\u56de\u503c\u5206\u4e3a\u4e24\u7c7b\uff1a\u8fd4\u56dejs\u4ee3\u7801\u7684loader\uff08\u6700\u5de6\u8fb9\u4e00\u4e2aloader\u5fc5\u7136\u662f\u8fd4\u56dejs\u4ee3\u7801\u7684\uff09\uff0c\u548c\u5176\u4ed6\u5904\u7406\u7684loader"))),t.a.createElement("li",null,t.a.createElement("p",null,"what pitch?\u624b\u52a8\u6267\u884cremainingRequest"),t.a.createElement(o["a"],{code:'let {getOptions,stringifyRequest} = require(\'loader-utils\');\nfunction loader(source){\n}\nloader.pitch = function(remainingRequest,previousRequest,data){\n    // pitch\u8fd4\u56de\u4e4b\u540e\u76f8\u5f53\u4e8e\u8fd9\u4e2amain.less\u5c31loader\u8f6c\u8bd1\u5b8c\u6210\u4e86,**\u8fd9\u4e2a\u9636\u6bb5\u4e0d\u4f1a\u8d70less-loader**\n    // webpack\u62ff\u5230\u8fd9\u4e2aJS\u4e4b\u540e\u4f1a\u89e3\u6790\u8fd9\u4e2aJS,\u53d8\u6210AST\u62bd\u8c61\u8bed\u6cd5\u6811,\u7136\u540e\u627e\u5230\u91cc\u9762**require\u5173\u952e\u5b57**,\u5bfb\u627e\u4f9d\u8d56\n    // webpack\u4f1a\u7ee7\u7eed\u89e3\u6790\u4f9d\u8d56,\u628a"./loaders/less-loader.js!./src/main.less"\u6a21\u5757ID\u53bb**\u89e3\u6790\u52a0\u8f7d**\n    // moduleId\uff1a!!./loaders/less-loader.js!./src/main.less ==>\n    // module\u51fd\u6570\u5185\u5bb9\uff1amodule.exports="#root {\\n  color: red;\\n}\\n"\n    let script = `\n      let style = document.createElement(\'style\');\n      style.innerHTML = require(${stringifyRequest(this,"!!"+remainingRequest)});\n      //style.innerHTML = require("!!./loaders/css-loader.js!./src/main.less");\n      document.head.appendChild(style);\n    `;\n    return script;\n}\nmodule.exports = loader;',lang:"js"}),t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("strong",null,"loader\u7684\u53e0\u52a0\u987a\u5e8f"),"\uff1apre\uff08\u524d\u7f6e\uff09\uff0cpost\uff08\u540e\u7f6e\uff09\uff0cinline\uff08\u884c\u5185\uff09\uff0cauto\uff08\u666e\u901a\uff09",t.a.createElement("ul",null,t.a.createElement("li",null,"!\uff1anoAutoLoaders\uff0c",t.a.createElement("strong",null,"\u4e0d\u8981\u666e\u901aloader"),"\uff0c\u53ea\u8981\u524d\u7f6e\u548c\u540e\u7f6e\u548c\u884c\u5185"),t.a.createElement("li",null,"-!\uff1anoPreAutoLoaders\uff0c\u4e0d\u8981\u524d\u7f6e\u548c\u666e\u901aloader\uff0c",t.a.createElement("strong",null,"\u53ea\u8981\u540e\u7f6e\u548c\u884c\u5185")),t.a.createElement("li",null,"!!\uff1anoPrePostAutoLoaders\uff0c\u4e0d\u8981\u524d\u7f6e/\u540e\u7f6e\u548c\u666e\u901aloader\uff0c**\u53ea\u8981\u884c\u5185loader **"))),t.a.createElement("li",null,t.a.createElement("strong",null,"loader\u7684\u67e5\u627e\u89c4\u5219"),":",t.a.createElement("ul",null,t.a.createElement("li",null,"\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u7684loaders"),t.a.createElement("li",null,"\u6839\u636e!\uff0c-!\uff0c!!\uff0c\u51b3\u5b9a\u54ea\u4e9bloader\u6267\u884c")))))),t.a.createElement("h2",{id:"sourcemap"},t.a.createElement(r["AnchorLink"],{to:"#sourcemap","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"sourcemap"),t.a.createElement("ul",null,t.a.createElement("li",null,"\u53ef\u4ee5\u4f7f\u7528compiler.jar\u5305\u5bf9\u76ee\u6807js\u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\u6253\u5305\u51fa\u4e00\u4e2ajson\u683c\u5f0f\u7684sourcemap\u6587\u4ef6"),t.a.createElement("li",null,"\u6253\u5305source-map\u7684\u4e00\u4e9b\u7ec4\u5408\u5c5e\u6027\uff1acheap\uff0cinline\uff0cmodule"),t.a.createElement("li",null,"VLQ\u7f16\u7801\uff0c6\u4e2a\u4e8c\u8fdb\u5236")),t.a.createElement("h2",{id:"loader-runner"},t.a.createElement(r["AnchorLink"],{to:"#loader-runner","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"loader-runner"),t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("p",null,"\u53c2\u6570\uff1aoptions\uff08\u7528\u6237\u81ea\u5b9a\u4e49\uff09\uff0ccallback\uff08\u52a0\u8f7d\u5b8c\u6210\u7684\u56de\u8c03\uff09")),t.a.createElement("li",null,t.a.createElement("p",null,t.a.createElement("strong",null,"iteratePitchingLoaders\u65b9\u6cd5"),"\uff1a\u9012\u5f52\u8c03\u7528loader-pitch\uff0c\u9012\u5f52\u9000\u51fa\u65f6\uff0c\u8c03\u7528processResource\u8bfb\u53d6\u6587\u4ef6")),t.a.createElement("li",null,t.a.createElement("p",null,t.a.createElement("strong",null,"processResource\u65b9\u6cd5"),"\uff1a\u8bfb\u53d6\u6b63\u5219\u5339\u914d\u7684\u76ee\u6807\u6587\u4ef6")),t.a.createElement("li",null,t.a.createElement("p",null,t.a.createElement("strong",null,"iterateNormalLoaders\u65b9\u6cd5"),"\uff1a\u9012\u5f52\u8c03\u7528loader-normal\uff0c\u9012\u5f52\u9000\u51fa\u65f6\uff0c\u8c03\u7528callback\u5b8c\u6210\u52a0\u8f7d")),t.a.createElement("li",null,t.a.createElement("p",null,"\u5176\u4ed6\u7ec6\u8282\uff1a"),t.a.createElement("ul",null,t.a.createElement("li",null,"\u7ef4\u62a4\u4e00\u4e2a\u5168\u5c40\u7684loaderContext\u5bf9\u8c61"),t.a.createElement("li",null,"\u5982\u4f55\u83b7\u53d6\u5f53\u524d\u7684loaderContext\uff1f\u901a\u8fc7\u7ef4\u62a4\u4e00\u4e2aloaders\u5217\u8868\uff0c\u548cloaderIndex"),t.a.createElement("li",null,"\u5982\u4f55\u83b7\u53d6request\uff0cremainingRequest\uff0ccurrentRequest\uff0cpreviousRequest\uff0cdata\uff1f\u901a\u8fc7\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0cObject.DefinedProperty(loaderContext\uff0c...)"),t.a.createElement("li",null,"\u5b9e\u73b0loader.raw\u3002true\u65f6\u8fd4\u56de\u4e8c\u8fdb\u5236\uff0cfalse\u65f6\u8fd4\u56deutf8\u5b57\u7b26\u4e32"),t.a.createElement("li",null,"\u5b9e\u73b0this.async()\uff0c\u5f02\u6b65loader\u3002\u8fd4\u56de\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5728loader-runner\u5185\u90e8\u7ef4\u62a4\u4e00\u4e2aisSync\u5c5e\u6027\uff0c\u53ea\u6709\u540c\u6b65\u65f6\uff0citerateNormalLoaders\u9012\u5f52\u624d\u4f1a\u5f80\u4e0b\uff0c\u5426\u5219\u9700\u8981\u7528\u6237\u624b\u52a8\u6267\u884c\u4e0a\u9762\u7684\u56de\u8c03\u51fd\u6570"))),t.a.createElement("li",null,t.a.createElement("p",null,"\u4ee3\u7801\uff1a"))),t.a.createElement(o["a"],{code:"// \u5c06\u7528\u6237\u914d\u7f6e\u7684loader\u8f6c\u6210\u4e00\u4e2aloaderObject\n// \u53c2\u6570loader\u662f\u4e00\u4e2a\u7edd\u5bf9\u8def\u5f84\nfunction createLoaderObject(loader){\n    // \u8fd9\u4e2adata\u662f\u4f20\u9012\u7ed9loader\u65b9\u6cd5\u7684data\n    let loaderObject = {data:{}};\n    // \u8bf7\u6c42\u8def\u5f84\n    loaderObject.request = loader; \n    // \u52a0\u8f7dloader\u7684\u51fd\u6570\u4f53\n    loaderObject.normal = require(loader); \n    // \u83b7\u53d6loader\u7684pitch\u65b9\u6cd5\n    loaderObject.pitch = loaderObject.normal.pitch; \n}\n// loader-runner\u6838\u5fc3\u4ee3\u7801\nconst runLoders = (options, callback) => {\n    // \u7a7a\u5bf9\u8c61\uff0c\u6302\u8f7d\u4e86\u5f53\u524dloaderIndex\uff0c\u76ee\u6807\u6587\u4ef6\u6e90\u4ee3\u7801resource\uff0c\u6240\u6709\u7684loaders\n    let loaderContext = {}; \n    // \u89e3\u6784\u7528\u6237\u914d\u7f6e\n    let {resource, loaders} = options;\n    loaders = loaders.map(createLoaderObject);\n    // \u6302\u8f7d\u5e76\u521d\u59cb\u5316\u5f53\u524dloaderIndex\n    loaderContext.loaderIndex = 0;\n    // \u6302\u8f7d\u76ee\u6807\u6587\u4ef6\u6e90\u4ee3\u7801\n    loaderContext.resource = resource;\n    // \u6302\u8f7d\u6240\u6709\u7684loaders\n    loaderContext.loaders = loaders;\n    // \u9012\u5f52\u8c03\u7528\u6240\u6709loaders\u7684pitch\u65b9\u6cd5\n    iteratePitchingLoaders(loaderContext, callback);\n    // \u5f02\u6b65\u5904\u7406\uff0c\u9ed8\u8ba4\u662f\u540c\u6b65\u7684\n    // why async\uff1f**\u53ef\u4f9b\u7528\u6237\u624b\u52a8\u63a7\u5236loader\u7684\u8c03\u7528\u65f6\u673a**\n    let isSync = true;\n    loaderContext.async = function(){\n        // \u8bbe\u7f6e\u5f02\u6b65\n        isSync = false;\n        // \u8fd4\u56de\u4e00\u4e2a\u5185\u90e8callback\u65b9\u6cd5\n        return innerCallback;\n    }\n\t// \u5185\u90e8callback\u65b9\u6cd5\n    const innerCallback = function(err, args){\n        // \u7528\u6237\u8c03\u7528\u4e86callback\uff0c\u9700\u8981\u91cd\u7f6eisSync\u72b6\u6001\n        isSync = false;\n        // \u7d22\u5f15\u51cf1\uff0c\u6307\u5411\u4e0a\u4e00\u4e2aloader\n        loaderContext.loaderIndex--;\n        // \u624b\u52a8\u6267\u884cloader\u7684\u65b9\u6cd5\u4f53\uff0c\u4f20\u5165loaderContext, args, callback\u4e09\u4e2a\u53c2\u6570\n        iterateNormalLoaders(loaderContext, args, callback);\n    }\n\n    // \u83b7\u53d6\u6240\u6709loader\u7684\u7edd\u5bf9\u8def\u5f84\u548c\u76ee\u6807\u6587\u4ef6\u6e90\u4ee3\u7801\u8def\u5f84\uff0c\u4f7f\u7528!\u5206\u5f00\n    Object.defineProperty(loaderContext, 'request', {\n        get: function(){\n            return loaderContext.loaders.map(o => o.request).concat(loaderContext.resource).join('!');\n        }\n    });\n    // \u83b7\u53d6\u4ece\u5f53\u524d\u7d22\u5f15\u5230\u6700\u540e\u7684\u6240\u6709\u8def\u5f84\uff0c\u4e0d\u5305\u62ec\u5f53\u524d\u7d22\u5f15\u7684loader\n    Object.defineProperty(loaderContext, 'reminingRequest', {\n        get: function(){\n            return loaderContext.loaders.slice(loaderContext.loaderIndex + 1).map(o => o.request).concat(loaderContext.resource).join('!');\n        }\n    });\n    // \u83b7\u53d6\u4ece\u5f53\u524d\u7d22\u5f15\u5230\u6700\u540e\u7684\u6240\u6709\u8def\u5f84\uff0c\u5305\u62ec\u5f53\u524d\u7d22\u5f15\u7684loader\n    Object.defineProperty(loaderContext, 'currentRequest', {\n        get: function(){\n            return loaderContext.loaders.slice(loaderContext.loaderIndex).map(o => o.request).concat(loaderContext.resource).join('!');\n        }\n    });\n    // \u83b7\u53d6\u4ece\u7d22\u5f150\u5230\u5f53\u524d\u7d22\u5f15\u7684\u6240\u6709\u8def\u5f84\uff0c\u4e0d\u5305\u62ec\u5f53\u524d\u7d22\u5f15\u7684loader\n    Object.defineProperty(loaderContext, 'previousRequest', {\n        get: function(){\n            return loaderContext.loaders.slice(0, loaderContext.loaderIndex).map(o => o.request).concat(loaderContext.resource).join('!');\n        }\n    });\n    // \u83b7\u53d6\u5f53\u524dloaderContext\u7684data\u5c5e\u6027\uff0c\u5728\u7528\u6237\u5b9a\u4e49\u7684loader\u65b9\u6cd5\u4f53\u4e2d\u4f1a\u8c03\u7528\n    Object.defineProperty(loaderContext, 'data', {\n        get: function(){\n            return loaderContext.loaders[loaderContext.loaderIndex].data;\n        }\n    });\n    \n    function iteratePitchingLoaders(loaderContext, callback){\n        // \u7ec8\u6b62\u6761\u4ef6\uff0c\u904d\u5386\u5b8c\u6240\u6709loader\n        if(loaderContext.loaderIndex >= loaderContext.loaders.length){\n            // \u7d22\u5f15\u51cf\u4e00\uff0c\u6307\u5411\u6700\u540e\u4e00\u4e2aloader\n            loaderContext.loaderIndex--;\n            // \u52a0\u8f7d\u76ee\u6807\u6587\u4ef6\u6e90\u4ee3\u7801\n            return processResource(loaderContext, callback);\n        }\n        // \u53d6\u5f53\u524dloaderObject\n        let currentLoaderObject = loaderContext.loaders[loaderContext.loaderIndex];\n        // \u53bb\u5f53\u524dloaderObject\u7684pitch\u65b9\u6cd5\n        let pitchFn = currentLoaderObject.pitch;\n        // pitch\u4e0d\u5b58\u5728\uff0c\u9012\u5f52\u8c03\u7528\u4e0b\u4e00\u4e2aloader\u7684pitch\n        if(!pitchFn){\n            loaderContext.loaderIndex++;\n            return iteratePitchingLoaders(loaderContext, callback);\n        }\n        // \u6267\u884cpitch\uff0c\u4f20\u5165reminingRequest\uff0cpreviousRequest\uff0cdata\u4e09\u4e2a\u53c2\u6570\n        let args = pitchFn.apply(loaderContext, [loaderContext.reminingRequest, loaderContext.previousRequest, currentLoaderObject.data]);\n        // \u5224\u65ad\u8fd4\u56de\u503c\uff0c\u6709\u8fd4\u56de\u503c\n        if(args){\n             // \u7d22\u5f15\u56de\u5230\u4e0a\u4e00\u4e2aloader\n            loaderContext.loaderIndex--;\n            // \u6267\u884c\u4e0a\u4e00\u4e2aloader\u7684\u51fd\u6570\u4f53\uff0c\u4f20\u5165loaderContext\uff0cargs\uff0ccallback\u4e09\u4e2a\u53c2\u6570\n            iterateNormalLoaders(loaderContext, args, callback);\n        }\n        // \u6ca1\u6709\u8fd4\u56de\u503c\n        else{\n            // \u7ee7\u7eed\u9012\u5f52\u8c03\u7528\u4e0b\u4e00\u4e2aloader\u7684pitch\n            loaderContext.loaderIndex++;\n            return iteratePitchingLoaders(loaderContext, callback);\n        }\n    }\n    \n    // \u8bfb\u53d6\u6e90\u6587\u4ef6\uff0c\u8c03\u8f6c\u65b9\u5411\uff0c\u8c03\u7528loader\u7684\u65b9\u6cd5\u4f53\n    function processResource(loaderContext, callback){\n        // \u8bfb\u53d6\u76ee\u6807\u6587\u4ef6\u6e90\u4ee3\u7801\u7684buffer\n        // TODO \u5224\u65adloader.raw\u5c5e\u6027\uff0c\u662f\u5426\u751f\u6210\u4e3a\u4e8c\u8fdb\u5236\u6570\u636e\uff08true\uff09\uff0c\u6216utf8\u5b57\u7b26\u4e32\uff08false\uff09\n        let buffer = fs.readFileSync(loaderContext.resource);\n        // \u5c06\u53c2\u6570loaderContext, buffer, callback\uff0c\u4f20\u9012\u7ed9\u5f53\u524dloaderIndex\u7684\u65b9\u6cd5\n        iterateNormalLoaders(loaderContext, buffer, callback);\n    }\n    \n    // \u9012\u5f52\u8c03\u7528\u6240\u6709loader\u7684\u65b9\u6cd5\u4f53\n    function iterateNormalLoaders(loaderContext, args, callback){\n        // \u7ec8\u6b62\u6761\u4ef6\n        if(loaderContext.loaderIndex < 0){\n            return callback(null, args);\n        }\n        // \u53d6\u5f53\u524dloaderObject\n        let currentLoaderObject = loaderContext.loaders[loaderContext.loaderIndex];\n        // \u53bb\u5f53\u524dloaderObject\u7684normal\u65b9\u6cd5\n        let normalFn = currentLoaderObject.normal;\n        // \u6267\u884cnormal\u65b9\u6cd5\uff0c\u4f20\u5165args\u4e24\u4e2a\u53c2\u6570\n        // \u628a\u8f6c\u6362\u540e\u7684\u8fd4\u56de\u503c\u91cd\u65b0\u8d4b\u503c\u7ed9args\n        args = normalFn.apply(loaderContext, [args]);\n        // \u5982\u679c\u662f\u540c\u6b65\uff0c\u81ea\u52a8\u5f80\u4e0b\u8d70.\u5426\u5219\u9700\u8981\u7b49\u7528\u6237\u81ea\u5df1\u6389\u5f02\u6b65callback\u5f80\u4e0b\u8d70\n        if(isSync){\n            // \u7d22\u5f15\u51cf1\uff0c\u6307\u5411\u4e0a\u4e00\u4e2aloader\n            loaderContext.loaderIndex--;\n            // \u9012\u5f52\u8c03\u7528\u4e0b\u4e00\u4e2aloader\u7684\u65b9\u6cd5\u4f53\uff0c\u4f20\u5165\u5f53\u524dloader\u8f6c\u6362\u540e\u7684args\uff08\u76ee\u6807\u4ee3\u7801\uff09\n            iteratePitchingLoaders(loaderContext, args, callback);\n        }\n    }\n}",lang:"js"}),t.a.createElement("h2",{id:"tapable"},t.a.createElement(r["AnchorLink"],{to:"#tapable","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"Tapable"),t.a.createElement("ul",null,t.a.createElement("li",null,"webpack\u501f\u52a9Tapable\u5c06\u5404\u4e2a\u63d2\u4ef6\u4e32\u8054\u8d77\u6765\uff0c\u5176\u4e2dwebpack\u7684compiler\u548ccompilation\u90fd\u662fTapable\u7684\u5b9e\u4f8b"),t.a.createElement("li",null,"\u603b\u5171\u67099\u79cdHook"),t.a.createElement("li",null,"Tapable\u6309\u7c7b\u578b\u5206\uff1a",t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("strong",null,"Sync"),"\uff1a\u540c\u6b65"),t.a.createElement("li",null,t.a.createElement("strong",null,"AsyncParallel"),"\uff1a\u5f02\u6b65\u5e76\u884c"),t.a.createElement("li",null,t.a.createElement("strong",null,"AsyncSeries"),"\uff1a\u5f02\u6b65\u4e32\u884c"))),t.a.createElement("li",null,"Tapable\u6309\u8fd4\u56de\u503c\u5206\uff1a",t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("strong",null,"basic"),"\uff1a\u53ea\u6267\u884c\u51fd\u6570\uff0c\u4e0d\u5173\u5fc3\u8fd4\u56de\u503c"),t.a.createElement("li",null,t.a.createElement("strong",null,"bail"),"\uff1a\u4e00\u65e6\u6709\u8fd4\u56de\u503c\uff08\u975eundefined\uff09\uff0c",t.a.createElement("strong",null,"\u76f4\u63a5\u7ed3\u675f")),t.a.createElement("li",null,t.a.createElement("strong",null,"waterfull"),"\uff1a\u7011\u5e03\uff0c\u4e0a\u4e00\u4e2a\u8f93\u51fa\u662f\u4e0b\u4e00\u4e2a\u8f93\u5165"),t.a.createElement("li",null,t.a.createElement("strong",null,"loop"),"\uff1a\u5faa\u73af\uff0c",t.a.createElement("strong",null,"\u76f4\u5230\u6240\u6709\u7ed3\u679c\u90fd\u662fundefined\u4e3a\u6b62"),"\uff0c\u4e00\u65e6\u6709\u8fd4\u56de\u503c\uff08\u975eundefined\uff09\uff0c\u5219",t.a.createElement("strong",null,"\u8df3\u56de\u7b2c\u4e00\u4e2a\u51fd\u6570\u7ee7\u7eed\u5faa\u73af")))),t.a.createElement("li",null,t.a.createElement("strong",null,"hook.tap\u65b9\u6cd5"),"\uff1a\u6ce8\u518c\u76d1\u542c\uff08\u7c7b\u4f3cdom.addEventListener\uff09",t.a.createElement("ul",null,t.a.createElement("li",null,"\u5c06\u7528\u6237\u4f20\u7684\u53c2\u6570",t.a.createElement("code",null,"name,fn"),"\u6dfb\u52a0\u5230\u5b9e\u4f8b\u7684taps\u5c5e\u6027\u4e0a"))),t.a.createElement("li",null,t.a.createElement("strong",null,"hook.call\u65b9\u6cd5"),"\uff1a\u89e6\u53d1\u94a9\u5b50\u6267\u884c\uff08\u7c7b\u4f3cdom.dispatchEvent\uff09",t.a.createElement("ul",null,t.a.createElement("li",null,"\u53c2\u6570",t.a.createElement("code",null,"name, fn")),t.a.createElement("li",null,"\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u7136\u540e\u4f20\u5165\u628a\u53c2\u6570\u4f20\u8fdb\u53bb\u8c03\u7528\u5b83"),t.a.createElement("li",null,"\u901a\u8fc7\u5b50\u7c7b\u7684",t.a.createElement("strong",null,"compile\u65b9\u6cd5"),"\u91cc\u8c03\u7528",t.a.createElement("strong",null,"\u5de5\u5382\u5b9e\u4f8b"),"\u6765\u6784\u9020\u8fd9\u4e2a\u51fd\u6570\uff0c\u4f20\u9012\u4e00\u4e2a\u5bf9\u8c61\u53c2\u6570","{","taps: this.taps, args: this.args","}"),t.a.createElement("li",null,"\u5b9a\u4e49\u5de5\u5382\u7c7b\uff0c\u91cc\u9762\u5b9a\u4e49setup\u548ccreate\u65b9\u6cd5",t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("strong",null,"setup\u65b9\u6cd5"),"\uff1a\u7ed9\u94a9\u5b50\u7684\u5b9e\u4f8b\u7684_x\u5c5e\u6027\u8d4b\u503c\u4e00\u4e2afn\u6570\u7ec4"),t.a.createElement("li",null,t.a.createElement("strong",null,"create\u65b9\u6cd5"),"\uff1a\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff0creturn new Function(this.args(), this.header() + this.content())",t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("strong",null,"args\u65b9\u6cd5"),'\uff1a\u8fd4\u56de\u53c2\u6570\u5217\u8868\u7684\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528","\u62fc\u63a5'),t.a.createElement("li",null,t.a.createElement("strong",null,"header\u65b9\u6cd5"),"\uff1a\u8fd4\u56de\u5c5e\u6027\u5b9a\u4e49\u7684\u4ee3\u7801\u5b57\u7b26\u4e32"),t.a.createElement("li",null,t.a.createElement("strong",null,"content\u65b9\u6cd5"),"\uff1a\u8fd4\u56de\u51fd\u6570\u4f53\u7684\u4ee3\u7801\u5b57\u7b26\u4e32"))))))),t.a.createElement("li",null,t.a.createElement("strong",null,"hook.tapSync\u65b9\u6cd5"),"\uff1a\u6ce8\u518c\u5f02\u6b65\u56de\u8c03\uff0c\u7c7b\u4f3ctap\u7684\u5b9e\u73b0",t.a.createElement("ul",null,t.a.createElement("li",null,"\u53c2\u6570",t.a.createElement("code",null,"name,syncFn")))),t.a.createElement("li",null,t.a.createElement("strong",null,"hook.callSync\u65b9\u6cd5"),"\uff1a\u89e6\u53d1\u5f02\u6b65\u56de\u8c03\uff0c\u7c7b\u4f3ccall\u7684\u5b9e\u73b0",t.a.createElement("ul",null,t.a.createElement("li",null,"\u53c2\u6570",t.a.createElement("code",null,"name,syncFn")),t.a.createElement("li",null,"\u91cd\u65b0\u5b9a\u4e49\u81ea\u5df1\u7684\u5de5\u5382\u7c7b"))),t.a.createElement("li",null,"\u5f02\u6b65\u5e76\u884c\uff1a\u5faa\u73af+\u8ba1\u6570\u5668+\u56de\u8c03"),t.a.createElement("li",null,"\u5f02\u6b65\u5e76\u884c\uff1a\u8fed\u4ee3next\u56de\u8c03"))))}));l["default"]=e=>{var l=t.a.useContext(r["context"]),n=l.demos;return t.a.useEffect((()=>{var l;null!==e&&void 0!==e&&null!==(l=e.location)&&void 0!==l&&l.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),t.a.createElement(c,{demos:n})}}}]);