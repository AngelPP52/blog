(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[48],{Cbjs:function(e,n,t){"use strict";t.r(n);var l=t("ahKI"),a=t.n(l),r=t("s8Wh"),c=t("Fesk"),o=a.a.memo((e=>{e.demos;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("h2",{id:"\u62bd\u8c61\u8bed\u6cd5\u6811-ast"},a.a.createElement(r["AnchorLink"],{to:"#\u62bd\u8c61\u8bed\u6cd5\u6811-ast","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u62bd\u8c61\u8bed\u6cd5\u6811 AST"),a.a.createElement("blockquote",null,a.a.createElement("p",null,"astexplorer AST\u53ef\u89c6\u5316\u5de5\u5177")),a.a.createElement("h3",{id:"\u7f16\u8bd1\u5668\u57fa\u672c\u6d41\u7a0b"},a.a.createElement(r["AnchorLink"],{to:"#\u7f16\u8bd1\u5668\u57fa\u672c\u6d41\u7a0b","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u7f16\u8bd1\u5668\u57fa\u672c\u6d41\u7a0b"),a.a.createElement("ul",null,a.a.createElement("li",null,"JavaScript\u8bcd\u6cd5\u5206\u6790\uff0c\u8bed\u6cd5\u5206\u6790"),a.a.createElement("li",null,"\u5b9a\u4e49\u8bbf\u95ee\u5668\uff0c\u904d\u5386AST\uff0c\u6df1\u5ea6\u4f18\u5148"),a.a.createElement("li",null,"\u6839\u636e\u9700\u6c42\uff0c\u66f4\u65b0\u8bed\u6cd5\u6811\uff08\u5982babel\u8f6c\u6362\u4f4e\u7248\u672c\u8bed\u6cd5\uff09\uff0c\u5728\u8bbf\u95ee\u5668\u8fdb\u5165\u6216\u9000\u51fa\u7684\u5730\u65b9\u5904\u7406"),a.a.createElement("li",null,"\u751f\u6210\u65b0\u8bed\u6cd5\u7684\u4ee3\u7801")),a.a.createElement("h3",{id:"javascript-parser"},a.a.createElement(r["AnchorLink"],{to:"#javascript-parser","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"JavaScript Parser"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("p",null,"esprima")),a.a.createElement("li",null,a.a.createElement("p",null,"acorn")),a.a.createElement("li",null,a.a.createElement("p",null,"babel"),a.a.createElement("ul",null,a.a.createElement("li",null,"@babel/core\uff0c\u6838\u5fc3\u5305\uff0c\u751f\u6210\u548c\u904d\u5386AST"),a.a.createElement("li",null,"babel-types\uff0c\u5224\u65adAST\u8282\u70b9\u7c7b\u578b\uff0cbabel\u5904\u7406\u8bed\u6cd5\u8f6c\u6362\u7684\u6838\u5fc3\u65b9\u6cd5"),a.a.createElement("li",null,"\u4f7f\u7528babel-types\u548c@babel/core\uff0c\u5904\u7406es6\u8bed\u6cd5\uff0c\u81ea\u5b9a\u4e49\u63d2\u4ef6")),a.a.createElement(c["a"],{code:'const parser = require("@babel/parser");\nconst traverse = require("@babel/traverse").default;\nconst generator = require("@babel/generator").default;\nconst t = require("@babel/types");\n\nfunction loader(source) {\n  console.log("\u8f6c\u6362\u524d\u7684jsx\u4ee3\u7801: \\r\\n%s", source); // <h1 id="title"><span>hello</span>world</h1>\n\n  // \u83b7\u53d6ast\n  const ast = parser.parse(source, { plugins: ["jsx"] });\n\n  // \u904d\u5386ast\n  traverse(ast, {\n    JSXElement(nodePath) {\n      const next = (node) => {\n        if (!node) return t.nullLiteral();\n        // JSX \u6807\u7b7e\u8282\u70b9\n        if (t.isJSXElement(node)) {\n          // React.createElement\u51fd\u6570\n          let memberExpression = t.memberExpression(\n            t.identifier("React"),\n            t.identifier("createElement")\n          );\n          // \u51fd\u6570\u53c2\u6570\u5217\u8868\n          let _arguments = [];\n          // \u6807\u7b7e\n          let stringLiteral = t.stringLiteral(node.openingElement.name.name);\n          // \u5c5e\u6027\n          let objectExpression = node.openingElement.attributes.length\n            ? t.objectExpression(\n                node.openingElement.attributes.map((attr) =>\n                  t.objectProperty(t.identifier(attr.name.name), attr.value)\n                )\n              )\n            : t.nullLiteral();\n          _arguments = [stringLiteral, objectExpression];\n          // \u9012\u5f52\u5904\u7406\u5b50\u8282\u70b9\n          _arguments.push(...node.children.map((item) => next(item)));\n          return t.callExpression(memberExpression, _arguments);\n        } else if (t.isJSXText(node)) {\n          // JSX \u6587\u672c\u8282\u70b9\n          return t.stringLiteral(node.value);\n        }\n      };\n      let targetNode = next(nodePath.node);\n      // console.log("\u8f6c\u4e49\u540e\u7684ast: %s", JSON.stringify(targetNode, null, 2)); \u8f6c\u6362\u540e\uff1a\n      // React.createElement("h1", {\n  \t  // id: "title"\n\t  // },React.createElement("span", null, "hello"), "world");\n      nodePath.replaceWith(targetNode);\n    },\n  });\n\n  // \u751f\u6210\u4ee3\u7801\n  const output = generator(ast, {}, source);\n\n  // \u8fd4\u56de\u8f6c\u6362\u540e\u7684\u4ee3\u7801\n  console.log("\u8f6c\u6362\u540e\u7684js\u4ee3\u7801: \\r\\n%s", output.code);\n  return output.code;\n}\n\nmodule.exports = loader;',lang:"js"})),a.a.createElement("li",null,a.a.createElement("p",null,"astexplorer\uff1a\u5728\u7ebfast\u751f\u6210\u5668"))),a.a.createElement("h3",{id:"\u7f16\u8bd1\u5668"},a.a.createElement(r["AnchorLink"],{to:"#\u7f16\u8bd1\u5668","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u7f16\u8bd1\u5668"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("strong",null,"tokenizer"),"\uff1a\u8bcd\u6cd5\u5206\u6790\u5668"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u5212\u5206\u5355\u8bcd"),a.a.createElement("li",null,"\u8fd4\u56de\u4e00\u4e2a\u5355\u8bcd\u6570\u7ec4"))),a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("strong",null,"parser"),"\uff1a\u8bed\u6cd5\u5206\u6790\u5668"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u5c06\u7279\u5b9a\u7684\u5355\u8bcd\u8f6c\u6210\u7279\u5b9a\u7684\u8282\u70b9\u7c7b\u578b"),a.a.createElement("li",null,"\u751f\u6210\u4e00\u4e2aast"))),a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("strong",null,"traverse"),"\uff1a\u904d\u5386\u5668"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u904d\u5386ast\uff0c\u5148\u5e8f\u904d\u5386"),a.a.createElement("li",null,"\u53ef\u4ee5\u4f20\u5165\u81ea\u5b9a\u4e49\u7684\u8bbf\u95ee\u5668\u8bbf\u95eeast\u8282\u70b9"))),a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("strong",null,"transformer"),"\uff1a\u8f6c\u6362\u5668"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u601d\u8def\uff1a\u4fee\u6539\u8001\u6811\uff0c\u6216\u662f\u91cd\u5efa\u65b0\u6811"),a.a.createElement("li",null,"\u8f6c\u6362\u5668\u5185\u90e8\u8c03\u7528traverse\u904d\u5386\u65e7\u6811\u5904\u7406"),a.a.createElement("li",null,"\u5982\u4f55\u91cd\u5efa\u65b0\u6811\uff1f\u901a\u8fc7\u5728\u65e7\u6811\u8eab\u4e0a\u6302\u4e00\u4e2acontext\u6307\u5411\u65b0\u6811\u7684\u5f85\u5904\u7406\u8282\u70b9\u4e0a\uff08body\uff0carguments\u7b49\uff09\uff0c\u8fd9\u6837\u5728\u904d\u5386\u5904\u7406\u65e7\u6811\u65f6\uff0c\u901a\u8fc7\u4fee\u6539context\uff0c\u5c31\u53ef\u4ee5\u53d8\u76f8\u4fee\u6539\u5230\u65b0\u6811\u7684\u8282\u70b9"))),a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("strong",null,"codeGenerator"),"\uff1a\u4ee3\u7801\u751f\u6210\u5668"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u5bf9\u4e0d\u540c\u8282\u70b9\u6309\u7c7b\u578b\u5199\u4e0d\u540c\u7684\u5904\u7406\u903b\u8f91"),a.a.createElement("li",null,"\u8fd4\u56de\u4e00\u4e2a\u65b0\u8bed\u8a00\u7684\u4ee3\u7801")))),a.a.createElement("h3",{id:"\u6709\u9650\u72b6\u6001\u673a"},a.a.createElement(r["AnchorLink"],{to:"#\u6709\u9650\u72b6\u6001\u673a","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u6709\u9650\u72b6\u6001\u673a"),a.a.createElement("blockquote",null,a.a.createElement("p",null,"\u8bcd\u6cd5\u5206\u6790\u9636\u6bb5"),a.a.createElement("p",null,"\u6839\u636e\u8f93\u5165\u7684\u72b6\u6001\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u72b6\u6001"),a.a.createElement("p",null,"\u573a\u666f\uff1a\u89e3\u6790\u56db\u5219\u8fd0\u7b97\uff0c\u89e3\u6790html\uff0c\u89e3\u6790jsx")),a.a.createElement("h3",{id:"\u6b63\u5219\u8868\u8fbe\u5f0f\u5206\u8bcd"},a.a.createElement(r["AnchorLink"],{to:"#\u6b63\u5219\u8868\u8fbe\u5f0f\u5206\u8bcd","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u6b63\u5219\u8868\u8fbe\u5f0f\u5206\u8bcd"),a.a.createElement("p",null,"\u901a\u8fc7reg.exec\u65b9\u6cd5\uff0c\u4e0d\u65ad\u5339\u914d\u6e90\u4ee3\u7801\u7684\u7684\u5b57\u7b26\uff0c\u751f\u6210\u5355\u8bcd\u6570\u7ec4"),a.a.createElement(c["a"],{code:"// \u8bcd\u6cd5\u5206\u6790\u5668\n\n// \u8bed\u6cd5\u5206\u6790\u5668\n\n// \u904d\u5386\u5668\n\n// \u8f6c\u6362\u5668\n\n// \u751f\u6210\u5668",lang:"js"})))}));n["default"]=e=>{var n=a.a.useContext(r["context"]),t=n.demos;return a.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.a.createElement(o,{demos:t})}}}]);